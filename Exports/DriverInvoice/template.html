<!DOCTYPE html><html ng-app="cab9.export"><head>    <title>Invoice Receipt</title>    <link href="../common/css/style.min.css" rel="stylesheet" />    <style>    tr {        page-break-inside: avoid !important;        page-break-before: always !important;    }    tbody td {        border-right: 1px dashed #ddd;        vertical-align: top !important;    }    tbody td:last-child {        border-right: 0 !important;    }    thead th {        border: 0 !important;        border-top: 1px solid #ddd !important;        border-bottom: 2px solid #ddd !important;    }    </style>    <script type="text/javascript">    //setting up headers and footers for html2pdf    var html2pdf = {        footer: {            height: "0.8cm",            contents: '<div class="text-center t-s" style="font-size:12px; text-align: center; background-color: #fff; margin: 0 -20px;">This is not a VAT Invoice<br />e9ine</div>'        }    };    </script></head><body ng-controller="InvoiceReceiptController" id="invoice">    <div class="container text-center" ng-if="!paymentId || !token || error">        Error Fetching Invoice    </div>    <div class="container" ng-if="paymentId && token">        <div class="row mt30" id="company-information">            <div class="col-xs-2">                <img ng-src="{{ API_ENDPOINT + company.LogoUrl }}" alt="" class="company-logo" />            </div>            <div class="col-xs-4">                <h4 ng-bind="company.Name"></h4>                <small ng-bind="getAddressSummary(company)"></small>                <br />                <small ng-bind="company.Phone"></small>                <br />                <small ng-bind="company.Website"></small>            </div>            <div class="col-xs-6 text-right pt20">                <h2 class="upper">Invoice</h2>            </div>        </div>        <div class="row mt50">            <div class="col-xs-6">                For the attention of:                <br />                <br />                <span class="bold" ng-bind="payment.Driver.Firstname+' '+payment.Driver.Surname"></span>                <p ng-bind="getAddressSummary(invoice.Client)"></p>                <span>P: {{payment.Driver.Mobile}}</span>                <br />                <span>E: {{payment.Driver.Email}}</span>            </div>            <div class="col-xs-6 text-right">                <div class="mb20">                    <strong class="upper brand-primary">Invoice Ref</strong>                    <br />{{payment.Invoice.Reference}}                </div>                <div class="mb20">                    <strong class="upper brand-primary">Created On</strong>                    <br />{{payment.Invoice.CreationTime | TZConvert:timezone | date:'shortDate'}}                </div>                <div class="mb20">                    <strong class="upper brand-primary">Due Date</strong>                    <br />{{payment.Invoice.DueDate | TZConvert:timezone | date:'shortDate'}}                </div>            </div>        </div>        <div class="invoice-table" style="overflow:visible;">            <span class="bold brand-primary upper">Invoiced Summary</span>            <table class="mt20 invoice-summary">                <tbody>                    <tr>                        <td>                            Bookings                            <br /><small>Total value of bookings</small>                        </td>                        <td class="text-right">                            {{calculateBookingsValue() | Format:currencyIcon}}                        </td>                    </tr>                    <tr>                        <td>                            VAT                        </td>                        <td class="text-right">                            {{payment.Invoice.TaxAmount | Format:currencyIcon}}                        </td>                    </tr>                </tbody>                <tfoot>                    <tr>                        <td>                            Total                        </td>                        <td class="text-right">                            {{payment.Invoice.TotalAmount | Format:currencyIcon}}                        </td>                    </tr>                    <tr>                        <td>                            Paid                        </td>                        <td class="text-right">                            {{calculatePaidAmount(payment.Invoice) | Format:currencyIcon}}                        </td>                    </tr>                    <tr>                        <td>                            Total Due                        </td>                        <td class="text-right">                            {{(payment.Invoice.TotalAmount - calculatePaidAmount(payment.Invoice)) | Format:currencyIcon}}                        </td>                    </tr>                </tfoot>            </table>        </div>        <div class="invoice-table mt20" style="overflow:visible;page-break-before: always;">            <span class="bold brand-primary upper">Invoiced Bookings</span>            <table class="mt20 table table-hover table-condensed bookings-table">                <thead style="display:table-header-group;">                    <tr>                        <th style="width:15%">Item</th>                        <th style="width:42%">Description</th>                        <th style="width:10%" class="text-right">Commission</th>                        <th style="width:10%" class="text-right">Price</th>                        <th style="width:10%" class="text-right">Tax</th>                        <th style="width:13%" class="text-right">Cost</th>                    </tr>                </thead>                <tbody>                    <tr ng-repeat="booking in InvoiceBookings | orderBy:'BookedDateTime'" ng-init="booking.Price = 0">                        <td>                            <strong>#{{booking.LocalId}}</strong>                            <br />{{booking.BookedDateTime | TZConvert:timezone | date:'shortDate' }} {{booking.BookedDateTime | TZConvert:timezone | date:'HH:mm'}}                        </td>                        <td style="overflow:hidden;">                            <strong>Pax: </strong>{{(booking.LeadPassenger.Firstname+' '+booking.LeadPassenger.Surname)}}                            <br />                            <strong>From: </strong>{{getFromSummary(booking.BookingStops)}}                            <br />                            <strong>To: </strong>{{getToSummary(booking.BookingStops)}}                            <br/>                            <strong>Fare: </strong>{{booking.ActualCost | Format:currencyIcon}}                        </td>                        <td class="text-right">                            <span>{{(booking.VehicleId && booking.Vehicle.DriverId == booking.DriverId) ? (100 - payment.PaymentModel.OwnCarCommission) : (100 - payment.PaymentModel.CompanyCarCommission)}}%</span>                        </td>                        <td class="text-right">                            <span>{{booking.DriverCost | Format:currencyIcon}}</span>                        </td>                        <td class="text-right">                            <span>0.00%</span>                        </td>                        <td class="text-right">                            <span>{{booking.DriverCost | Format:currencyIcon}}</span>                        </td>                    </tr>                    <tr>                        <td colspan="5" class="text-right">                            <strong>Sub Total </strong>                        </td>                        <td class="text-right">                            <span>{{payment.Invoice.SubTotal | Format:currencyIcon}}</span>                        </td>                    </tr>                    <tr>                        <td colspan="5" class="text-right">                            <strong>Tax Amount </strong>                        </td>                        <td class="text-right">                            <span>{{payment.Invoice.TaxAmount | Format:currencyIcon}}</span>                        </td>                    </tr>                    <tr>                        <td colspan="5" class="text-right">                            <h6 class="grey">Total</h6>                        </td>                        <td class="text-right">                            <h6 class="grey">{{payment.Invoice.TotalAmount | Format:currencyIcon}}</h6>                        </td>                    </tr>                    <tr>                        <td colspan="5" class="text-right">                            <h6 class="grey">Paid</h6>                        </td>                        <td class="text-right">                            <h6 class="grey">{{calculatePaidAmount(payment.Invoice) | Format:currencyIcon}}</h6>                        </td>                    </tr>                    <tr>                        <td colspan="5" class="text-right">                            <h6 class="grey">Outstanding Amount</h6>                        </td>                        <td class="text-right">                            <h6 class="grey">{{(payment.Invoice.TotalAmount - calculatePaidAmount(payment.Invoice)) | Format:currencyIcon}}</h6>                        </td>                    </tr>            </table>        </div>    </div><!-- build:exports --><script src="/Exports/common/jquery/jquery.min.js"></script><script src="/Exports/common/bootstrap/js/bootstrap.min.js"></script><script src="/Exports/common/angular/angular.min.js"></script><script src="/Exports/common/moment/moment.js"></script><script src="/Exports/common/moment-timezone/builds/moment-timezone-with-data.js"></script><script src="/Exports/common/angular-dynamic-locale/src/tmhDynamicLocale.js"></script><script src="/Exports/common.js"></script><!-- endbuild -->    <script src="https://code.angularjs.org/1.4.6/i18n/angular-locale_en-gb.js"></script></body></html>