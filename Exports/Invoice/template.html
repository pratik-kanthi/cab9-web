<!DOCTYPE html><html ng-app="cab9.export"><head>    <title>Invoice Receipt</title>    <meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" />    <link href="../common/css/style.min.css" rel="stylesheet" />    <style>        tr,tbody {            page-break-inside: avoid !important;            page-break-before: always !important;        }        .page-break {            page-break-inside: avoid !important;            page-break-before: always !important;        }        tbody td {            border-right: 1px dashed #ddd;            vertical-align: top !important;        }            tbody td:last-child {                border-right: 0 !important;            }        thead th {            border: 0 !important;            border-top: 1px solid #ddd !important;            border-bottom: 2px solid #ddd !important;        }    </style>    <script type="text/javascript">    </script></head><body ng-controller="DriverPaymentController">    <div class="container text-center ng-hide">        <!-- ng-if="!paymentId || error" -->        Error Fetching Payment    </div>    <div class="container" ng-if="dp" id="invoice-pdf">        <div class="row mt50 client-information">            <div class="col-xs-6">                For the attention of:                <h4 class="brand-primary">{{dp.Client.Name}}</h4>                <pre>{{dp.Client.$Address}}</pre>            </div>            <div class="col-xs-6 text-right">                <div class="mb20">                    <strong class="upper brand-primary">Account No</strong>                    <br />{{dp.Client.AccountNo}}                </div>                <div class="mb20">                    <strong class="upper brand-primary">Reference</strong>                    <br />{{dp.Reference}}                </div>                <div class="mb20">                    <strong class="upper brand-primary">Tax Date</strong>                    <br />{{dp.Payment.DueDate | date}}                </div>            </div>        </div>        <div class="invoice-summary mt50" style="overflow:visible;">            <span class="bold brand-primary upper">Invoice Summary</span>            <table class="invoice-summary">                <tbody>                    <tr>                        <td>                            Bookings <small>({{dp.Bookings.length}} Bookings)</small>                        </td>                        <td class="text-right">                            {{dp.Payment.BookingsSubTotal | currency: '£'}}                        </td>                    </tr>                    <tr ng-show="credits.length > 0 || debits.length > 0">                        <td>                            Adjustments                        </td>                        <td class="text-right">                            {{dp.Payment.AdjustmentsSubTotal | currency: '£'}}                        </td>                    </tr>                    <tr>                        <td>                            Extras                        </td>                        <td class="text-right">                            {{dp.Payment.ExtrasSubTotal | currency: '£'}}                        </td>                    </tr>                    <tr>                        <td>                            VAT <small>@ 20%</small>                        </td>                        <td class="text-right">                            {{ dp.Payment.AdjustmentsTaxAmount + dp.Payment.ExtrasTaxAmount + dp.Payment.BookingsTaxAmount + (dp.Payment.ExtrasSubTotal * 0.2) | currency: '£' }}                        </td>                    </tr>                </tbody>                <tfoot>                    <tr>                        <td>                            Total {{dp.Payment.AdjustmentsTaxAmount}}                        </td>                        <td class="text-right">                            {{ (dp.Payment.TotalAmount +  (dp.Payment.ExtrasSubTotal * 0.2)) | currency:'£'}}                        </td>                    </tr>                </tfoot>            </table>        </div>        <br />        <br />        <div class="footer" style="background-color: #F1F5F8;">            <div class="row">                <div class="col-xs-6">                    <strong>Terms 30 days. Payment due by {{DueDate | date:'dd/MM/yyyy'}}.</strong>                    <br />                    <br /> All queries must be raised within 14 days of invoice date.                    <br />                    <br /> Please note new bank details:                    <br /> Account: 10460907                    <br /> Sort Code: 205706                    <br />                    <br /><strong>VAT No: {{dp.Company.VATNumber}}</strong>                </div>                <div class="col-xs-6 text-right">                    <img ng-src="{{API_ENDPOINT}}{{dp.Company.LogoUrl}}" alt="" class="footer-logo" />                    <br />                    <h4 ng-bind="dp.Company.Name" class="brand-primary"></h4>                    <span ng-bind="dp.Company.Address1"></span><br />                    <span ng-bind="dp.Company.TownCity"></span><br />                    <span ng-bind="dp.Company.Postcode"></span><br />                    <br />                    <strong>Phone: </strong><span ng-bind="dp.Company.Phone"></span>                    <br />                    <strong>Email: </strong><span ng-bind="dp.Company.Email"></span>                    <br />                    <strong>Website: </strong><span ng-bind="dp.Company.Website"></span>                </div>            </div>        </div>        <div class="page-break"></div>        <div class="invoice-table mt50">            <span class="bold brand-primary upper">Bookings</span>            <table class="mt20 table table-hover table-condensed bookings-table">                <thead style="display:table-header-group;">                    <tr>                        <th style="width:10%">Item</th>                        <th style="width:17.5%">Booker/Passenger</th>                        <th style="width:32.5%">Journey/Tarrif</th>                        <th style="width:20%" class="text-right">Cost &amp; Extras</th>                        <th style="width:10%" class="text-right">Tax</th>                        <th style="width:10%" class="text-right">Total</th>                    </tr>                </thead>                <tbody>                    <tr style="background:#3d3d3d;color:white;" ng-repeat-start="group in groups">                        <td colspan="6" class="date-group">                            {{group.title}}                        </td>                    </tr>                    <tr ng-repeat="booking in group.bookings | orderBy:'BookedDateTime'" ng-init="booking.Price = 0">                        <td>                            <strong>#{{booking.LocalId}}</strong>                            <br />{{booking.BookedDateTime | date:'dd/MM/yyyy' }} {{booking.BookedDateTime | date:'HH:mm'}}                        </td>                        <td style="overflow:hidden;">                            {{booking.ClientStaff.Firstname}} {{booking.ClientStaff.Surname}} /                             {{booking.LeadPassenger.Firstname}} {{booking.LeadPassenger.Surname}}                            <br />                            <strong ng-show="booking.BookingValidations.length>0">References:<br /></strong>                            <div ng-repeat="exp in booking.BookingValidations">                                <strong>{{exp.ClientReference.ReferenceName}}: </strong>{{exp.Value}}                            </div>                        </td>                        <td>                            <div ng-repeat="stop in booking.BookingStops">                                <strong>{{$first ? 'P:' : ($last ? 'D:' : 'V') }} </strong>{{stop.Address1}} {{stop.Address2}} {{stop.Postcode}}                            </div>                            <strong>Tariff: </strong>{{booking.VehicleType.Name}}                        </td>                        <td class="text-right">                            <div>                                <strong>Journey:</strong> <span>{{booking.InvoiceCost | currency:'£'}}</span>                            </div>                            <div ng-repeat="exp in booking.BookingExpense">                                <strong>{{exp.BookingExpenseType.Name}}: </strong>{{exp.Amount | currency:'£'}}                                <br ng-hide="$last" />                            </div>                            <div>                                <strong>Adjustments:</strong> <span>{{booking.AdjustmentTotal | currency:'£'}}</span>                            </div>                        </td>                        <td class="text-right">                            <span>{{(booking.InvoiceCost + booking.AdjustmentTotal + booking.ExtrasCost) * 0.2 | currency:'£'}}</span>                        </td>                        <td class="text-right">                            <span>{{(booking.InvoiceCost + booking.AdjustmentTotal + booking.ExtrasCommission + booking.ExtrasCost) + ((booking.InvoiceCost + booking.AdjustmentTotal + booking.ExtrasCost) * 0.2) | currency:'£'}}</span>                        </td>                    </tr>                    <tr style="background:#3d3d3d;color:white;" ng-repeat-end>                        <td colspan="1" class="date-group">                            {{group.date}} Totals                        </td>                        <td class="text-right date-group">                            {{group.InvoiceCost | currency:'£'}}                        </td>                        <td class="text-right date-group">                            {{group.ExtrasCost | currency:'£'}}                        </td>                        <td class="text-right date-group">                            {{group.AdjustmentTotal | currency:'£'}}                        </td>                        <td class="text-right date-group">                            {{group.TaxAmount + (group.ExtrasCost * 0.2) | currency:'£'}}                        </td>                        <td class="text-right date-group">                            {{group.TotalAmount + (group.ExtrasCost * 0.2) | currency:'£'}}                        </td>                    </tr>                </tbody>                <tbody>                    <tr>                        <td colspan="2" class="text-right">                            <strong>Sub Totals</strong>                        </td>                        <td class="text-right" colspan="2">                            <span>{{dp.Payment.BookingsSubTotal + dp.Payment.ExtrasSubTotal | currency: '£'}}</span>                        </td>                        <td class="text-right">                            <span>{{dp.Payment.BookingsTaxAmount + (dp.Payment.ExtrasSubTotal * 0.2) | currency: '£'}}</span>                        </td>                        <td class="text-right">                            <span>{{dp.Payment.BookingsTaxAmount + dp.Payment.BookingsSubTotal + dp.Payment.ExtrasSubTotal + (dp.Payment.ExtrasSubTotal * 0.2) | currency: '£'}}</span>                        </td>                    </tr>                    <tr>                        <td colspan="5" class="text-right">                            <h6 class="grey">Total</h6>                        </td>                        <td class="text-right">                            <h6 class="grey">{{dp.Payment.BookingsSubTotal + dp.Payment.BookingsTaxAmount + dp.Payment.ExtrasSubTotal + (dp.Payment.ExtrasSubTotal * 0.2) | currency: '£'}}</h6>                        </td>                    </tr>                </tbody>            </table>        </div>        <div class="invoice-table mt50" ng-show="credits.length > 0 || debits.length > 0">            <span class="bold brand-primary upper">Adjustments</span>            <table class="mt20 table table-hover table-condensed bookings-table">                <thead style="display:table-header-group;">                    <tr>                        <th style="width:42%">Description</th>                        <th style="width:10%" class="text-right">Amount</th>                        <th style="width:10%" class="text-right">Tax</th>                        <th style="width:13%" class="text-right">Total</th>                    </tr>                </thead>                <tbody>                    <tr ng-show="credits.length > 0">                        <td colspan="4">                            <b>Debits</b>                        </td>                    </tr>                    <tr ng-repeat="ad in dp.Adjustments | filter:{'Type':'Debit'} as credits" ng-hide="(ad.ClientAdjustment || ad.ClientPricingModelAdjustment).AppliesToBooking">                        <td>                            {{(ad.ClientAdjustment || ad.ClientPricingModelAdjustment).Reference}}                        </td>                        <td style="overflow:hidden;">                            {{(ad.ClientAdjustment || ad.ClientPricingModelAdjustment).Amount | currency:'£'}}                        </td>                        <td class="text-right">                            <span>{{0.00 | currency: '£'}}</span>                        </td>                        <td class="text-right">                            <span>{{ad.Amount | currency:'£'}}</span>                        </td>                    </tr>                    <tr ng-show="credits.length > 0">                        <td colspan="3" class="text-right">                            <strong>Charges</strong>                        </td>                        <td class="text-right">                            <span>{{dp.Payment.AdjustmentsSubTotal | currency: '£'}}</span>                        </td>                    </tr>                    <tr ng-show="debits.length > 0">                        <td colspan="4">                            <b>Credits</b>                        </td>                    </tr>                    <tr ng-repeat="ad in dp.Adjustments | filter:{'Type':'Credit'} as debits" ng-hide="(ad.ClientAdjustment || ad.ClientPricingModelAdjustment).AppliesToBooking">                        <td>                            {{(ad.ClientAdjustment || ad.ClientPricingModelAdjustment).Reference}}                        </td>                        <td style="overflow:hidden;">                            ({{ad.Amount | currency:'£'}})                        </td>                        <td class="text-right">                            <span>{{0.00 | currency: '£'}}</span>                        </td>                        <td class="text-right">                            <span>{{ad.Amount | currency:'£'}}</span>                        </td>                    </tr>                    <tr ng-show="debits.length > 0">                        <td colspan="3" class="text-right">                            <strong>Credits</strong>                        </td>                        <td class="text-right">                            <span>{{dp.Payment.AdjustmentsSubTotal | currency: '£'}}</span>                        </td>                    </tr>                    <tr>                        <td colspan="3" class="text-right">                            <h6 class="grey">Total</h6>                        </td>                        <td class="text-right">                            <h6 class="grey">{{dp.Payment.AdjustmentsSubTotal | currency: '£'}}</h6>                        </td>                    </tr>            </table>        </div>    </div>    <script src="/Exports/common/jquery/jquery.min.js"></script>    <script src="/Exports/common/bootstrap/js/bootstrap.min.js"></script>    <script src="/Exports/common/angular/angular.min.js"></script>    <script src="/Exports/common/moment/moment.js"></script>    <script src="/Exports/common.js"></script>    <script src="/Exports/Invoice/controller.js"></script></body></html>