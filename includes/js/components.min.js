!function(i,n){function r(i,r,o,t){function e(e,f){if(!(e<o||t.indexOf(i)!=-1)){var s=Array.prototype.slice.call(arguments,2);n.forEach(r,function(n){n.log(e,i,f,s)})}}function f(e){if(!(1<o||t.indexOf(i)!=-1)){var f=Array.prototype.slice.call(arguments,1);n.forEach(r,function(n){n.debug(i,e,f)})}}function s(e){if(!(2<o||t.indexOf(i)!=-1)){var f=Array.prototype.slice.call(arguments,1);n.forEach(r,function(n){n.info(i,e,f)})}}function l(e){if(!(3<o||t.indexOf(i)!=-1)){var f=Array.prototype.slice.call(arguments,1);n.forEach(r,function(n){n.warning(i,e,f)})}}function a(e,f){if(!(4<o||t.indexOf(i)!=-1)){var s=Array.prototype.slice.call(arguments,2);n.forEach(r,function(n){n.error(i,e,f,s)})}}this.log=e,this.debug=f,this.info=s,this.warning=l,this.error=a}var o=n.module("framework.services.logging",[]);o.provider("Logger",function(){function i(i){l=i}function o(i){f.push(i)}function t(i){s.push(i)}function e(i){function o(i){return new r(i,e,l,s)}var t=o("Default");this.createLogger=o,this.log=t.log,this.debug=t.debug,this.info=t.info,this.warning=t.warning,this.error=t.error,this.DEBUG=1,this.INFO=2,this.WARNING=3,this.ERROR=4;var e=[];return n.forEach(f,function(r){if(n.isObject(r))e.push(r);else if(n.isFunction(r)){var o={log:r,debug:log.bind(null,1),info:log.bind(null,2),warning:log.bind(null,3),error:log.bind(null,4)};e.push(o)}else if(n.isArray(r)){var o=i.invoke(r,null,{Levels:{DEBUG:1,INFO:2,WARNING:3,ERROR:4}});e.push(o)}else if("string"==typeof r){var o=i.get(r);e.push(o)}}),this}var f=[],s=[],l=1;this.DEBUG=1,this.INFO=2,this.WARNING=3,this.ERROR=4,this.setGlobalLoggingLevel=i,this.addProvider=o,this.hideCatagory=t,this.$get=e,e.$inject=["$injector"]})}(window,angular);;;;
!function(){function o(o){function n(o,n,t,c){switch(o){case 1:e(n,t,c);break;case 2:a(n,t,c);break;case 3:r(n,t,c);break;case 4:i(n,t,exception,c);break;default:e(n,t,c)}}function e(o,n,e){var a=new Date;console.debug(a.toISOString()+" - "+o.toUpperCase()+" - "+n),angular.forEach(e,function(o,n){console.debug("additional info "+n+": ",o)})}function a(o,n,e){var a=new Date;console.info(a.toISOString()+" - "+o.toUpperCase()+" - "+n),angular.forEach(e,function(o,n){console.info("additional info "+n+": ",o)})}function r(o,n,e){var a=new Date;console.warn(a.toISOString()+" - "+o.toUpperCase()+" - "+n),angular.forEach(e,function(o,n){console.warn("additional info "+n+": ",o)})}function i(o,n,e,a){var r=new Date;console.error(r.toISOString()+" - "+o.toUpperCase()+" - "+n),console.error("original exception: "+e),angular.forEach(a,function(o,n){console.error("additional info "+n+": ",o)})}this.log=n,this.debug=e,this.info=a,this.warning=r,this.error=i}var n=angular.module("framework.services.logging");n.service("ConsoleLoggingProvider",["$window",o])}();;;;
!function(t,e){function i(){function t(t,e,i){return n[t]=[e,i],this}function i(t,i,s){function r(n,s,r){function a(){return this.$$changedValues}function o(){}function u(){var n=this,s=e.copy(this);for(var r in s)"_"!=r[0]&&"$"!=r[0]||delete s[r];var a=i.post(t.API_ENDPOINT+this.$$apiLocation,this);return a.success(function(t){n.$$originalValues.Id=t.Id,n.$commit(!0)}),a}function h(){var n=this,s=e.copy(this);for(var r in s)"_"!=r[0]&&"$"!=r[0]||delete s[r];var a={params:{id:this.Id}},o=i.put(t.API_ENDPOINT+this.$$apiLocation,s,a);return o.success(function(){n.$commit(!0)}),o}function l(n){var s=this,r=e.extend({Id:this.Id},this.$getChanges());n||e.forEach(this.$$foreignModels,function(t,e){if(this[e]){var i=this[e].$getChanges(),n=0;for(k in i)i.hasOwnProperty(k)&&n++;n>0&&(r[e]=i)}},this);var a={params:{id:this.Id}},o=i.patch(t.API_ENDPOINT+this.$$apiLocation,r,a);return o.success(function(){s.$commit(!0)}),o}function f(){var e={params:{id:this.Id}};return i["delete"](t.API_ENDPOINT+this.$$apiLocation,e)}function p(t){e.forEach(this.$$changedValues,function(t,e){var i=e,n=t;this.$$originalValues[i]=n},this),this.$$changedValues={},t||e.forEach(this.$$foreignModels,function(t,e){this[e].$commit()},this)}function $(t){this.$$changedValues={},t||e.forEach(this.$$foreignModels,function(t,e){this[e].$rollback()},this)}this.$$apiLocation=n,this.$$schema=s,this.$$originalValues={},this.$$changedValues={},this.$$foreignModels={},this.$getChanges=a,this.$validate=o,this.$save=u,this.$update=h,this.$patch=l,this.$delete=f,this.$commit=p,this.$rollback=$,e.forEach(s,function(t,i){var n=i,s=t;void 0!==r[n]?s.type===moment&&null!==r[n]?this.$$originalValues[n]=new Date(r[n]):"string"==typeof s.type&&null!==r[n]&&(s.nested||"object"==typeof r[n])?(this.$$originalValues[n]=new c[s.type](r[n]),this.$$foreignModels[n]=s.type):this.$$originalValues[n]=r[n]:this.$$originalValues[n]=e.isArray(s.defaultValue)?[]:s.defaultValue,Object.defineProperty(this,n,{configurable:!1,enumerable:!0,get:s.calculated||function(){return this.$$changedValues.hasOwnProperty(n)?this.$$changedValues[n]:this.$$originalValues[n]},set:function(t){(e.isUndefined(s.editable)||s.editable)&&(this.$$changedValues[n]=t)}})},this)}function a(s,r,o){function c(){return{id:w,includes:V,selects:P,filters:E,top:N,skip:O,orderBy:T,requestType:q}}function u(t){var i={};if(t)t.includes&&(i.includes=e.copy(V)),t.selects&&(i.selects=e.copy(P)),t.filters&&(i.filters=e.copy(E)),t.top&&(i.top=e.copy(N)),t.skip&&(i.skip=e.copy(O)),t.orderBy&&(i.orderBy=e.copy(T)),t.requestType&&(i.requestType=e.copy(q));else var i={includes:e.copy(V),selects:e.copy(P),filters:e.copy(E),top:e.copy(N),skip:e.copy(O),orderBy:e.copy(T),requestType:e.copy(q)};return new a(s,r,i)}function h(t,e){O=(t-1)*e,N=e}function l(t){return A=t,q="tracking",this}function f(){return q="raw",this}function p(){return q="tracking",this}function $(t){return N=t,this}function d(t){return O=t,this}function g(){return[].push.apply(T,arguments),this}function y(){return 2===arguments.length?e.isObject(arguments[1])||e.isFunction(arguments[1]):[].push.apply(V,arguments),this}function v(){return[].push.apply(P,arguments),A=null,this}function m(t,e,i){if(1===arguments.length)E.push(t);else if(3===arguments.length){switch(e){case"&&":e="and";break;case"||":e="or";break;case"=":case"==":case"===":e="eq";break;case"!=":case"!==":case"!===":e="ne";break;case">":e="gt";break;case">=":e="ge";break;case"<":e="lt";break;case"<=":e="le"}E.push(t+" "+e+" "+i)}return this}function I(){var n={};return n.params=k(),apiCall=t.API_ENDPOINT+s,i.get(apiCall,n).then(function(t){if("raw"==q)return t.data;if("tracking"==q){if(null==A&&(A=r),e.isArray(t.data)){var i=[];return e.forEach(t.data,function(t){i.push(new A(t))}),i}return new A(t.data)}if(e.isArray(t.data)){var i=[];for(j=0,leng=t.data.length;j<leng;j++)i.push(b(t.data[j],r.$schema));return i}return b(t.data,r.$schema)})}function b(t,e){var i={};for(var s in e)if(e[s].calculated)Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:e[s].calculated});else if(t[s]&&"string"==typeof e[s].type){var r=n[e[s].type];r?i[s]=b(t[s],r[1]):i[s]=t[s]}else e[s].type===moment?i[s]=t[s]?new Date(t[s]):null:i[s]=t[s];return i}function k(){var t={};return V.length&&(t.$expand=V.join(",")),E.length&&(t.$filter=E.join(" and ")),T.length&&(t.$orderby=T.join(",")),P.length&&(t.$select=P.join(",")),N&&(t.$top=N),O&&(t.$skip=O),t}null==o&&(o={});var w=idCounter++,V=o.includes||[],P=o.selects||[],E=o.filters||[],N=o.top||null,O=o.skip||null,T=o.orderBy||[],A=r;this.include=y,this.select=v,this.filter=m,this.where=m,this.orderBy=g,this.top=$,this.skip=d,this.parseAs=l,this.execute=I,this.trackingEnabled=p,this.raw=f,this.page=h,this.clone=u,this.getInnerValues=c;var q=o.requestType||"default"}function o(t,e){function i(i){var i=i||{};this.base=r,this.base(t,e,i)}function n(){return new a(t,o)}function s(e){return new a(t).filter("Id","eq",e)}i.prototype=new r,i.$schema=e,i.query=n,i.getById=s;var o=i;return i}var c={};return c.$associate=function(e,n,s,r){return i.get(t.API_ENDPOINT+"/api/tags",{params:{type1:e,type2:n,id1:s,id2:r}})},c.$dissociate=function(e,n,s,r){return i["delete"](t.API_ENDPOINT+"/api/tags",{params:{type1:e,type2:n,id1:s,id2:r}})},e.forEach(n,function(t,e){var i=e,n=t[0],s=t[1];c[i]=o(n,s)}),c}var n={};this.registerSchema=t,this.$get=i,i.$inject=["$config","$http","$q"]}function n(t,e,i,n){}var s=e.module("framework.services.data",[]);s.provider("Model",i),n.$inject=["$config","$http","$q","Models"]}(window,angular);;;;
!function(e,n){function t(){function e(e){u.push(e)}function t(e){o=e}function i(){n.forEach(u,function(e){e.$html=r(e)});var e={menuItems:u,defaultIcon:o};return e}function r(e){var n='<a ui-sref="'+e.state+'" ui-sref-opts="{reload: true}" style="color:white;"><i class="{{item.icon ? item.icon : menu.defaultIcon}}"></i>{{item.title}}</a>';return n}var u=[],o="icon-Align-JustifyAll",c={registerMenuItem:e,setDefaultIcon:t,$get:i};return c}var i=n.module("framework.services.menu",[]);i.provider("MenuService",t)}(window,angular);;;;
!function(){function e(e){return["$rootScope","$window","$log",function(n,r,a){for(var o,t,l,u=r[e]||(a.warn("This browser does not support Web Storage!"),{}),i={$default:function(e){for(var n in e)angular.isDefined(i[n])||(i[n]=e[n]);return i},$reset:function(e){for(var n in i)"$"===n[0]||delete i[n];return i.$default(e)}},s=0;s<u.length;s++){l=u.key(s);try{i[l]=angular.fromJson(u.getItem(l))}catch(c){i[l]=u.getItem(l)}}return o=angular.copy(i),n.$watch(function(){t||(t=setTimeout(function(){if(t=null,!angular.equals(i,o)){angular.forEach(i,function(e,n){angular.isDefined(e)&&"$"!==n[0]&&u.setItem(n,angular.toJson(e)),delete o[n]});for(var e in o)u.removeItem(e);o=angular.copy(i)}},100))}),"localStorage"===e&&r.addEventListener&&r.addEventListener("storage",function(e){"ngStorage-"===e.key.slice(0,10)&&(e.newValue?i[e.key.slice(10)]=angular.fromJson(e.newValue):delete i[e.key.slice(10)],o=angular.copy(i),n.$apply())}),i}]}var n=angular.module("framework.services.storage",[]);n.factory("$localStorage",e("localStorage")),n.factory("$sessionStorage",e("sessionStorage"))}();;;;
!function(e,n){function t(e,n){e.state("login",{url:"/login?redirect?params",views:{layout:{templateUrl:"/e9_components/services/login.partial.html",controller:"AuthLoginController"}}}),n.interceptors.push("AuthHttpInterceptor")}function o(e,t,o,r,i,s,a,c){var u=t.createLogger("Auth Module");e.$on(s.LOGIN_REQUIRED,function(){location.href=c.LOGIN_URL}),e.$on(s.LOGOUT,function(){location.href=c.LOGIN_URL}),e.$on(s.LOGIN_SUCCESS,function(e){a.retryAll()}),e.$on("$stateChangeStart",function(e,t,o,i,s){if("login"!=t.name){if(n.isDefined(t.permissions)||!n.isDefined(t.allowAnonymous)||!t.allowAnonymous){var a=r.getSession();if(null==a)return e.preventDefault(),u.debug("Redirecting to login page now"),void(location.href=c.LOGIN_URL)}if(n.isDefined(t.permissions)){var a=r.getSession();if(a&&a.Claims&&a.Claims.Permissions){for(var f=!1,l=0;l<t.permissions.length;l++){for(var d=t.permissions[l],g=0;g<a.Claims.Permissions.length;g++){var p=a.Claims.Permissions[g];if(p==d){f=!0;break}}if(f)break}f||(e.preventDefault(),u.debug("Redirecting to login page"),location.href=c.LOGIN_URL)}}}})}function r(e,n,t,o,r){function i(t,o){e.loginFailed=!1,$(".login-box").removeClass("animated shake"),n.login(t,o).then(s,a)}function s(){t.go("root.bookings")}function a(n){$(".login-box").addClass("animated shake"),e.loginFailed=!0}e.login=i,e.loginFailed=!1}function i(){function e(e){r=e}function t(e){i.tokenEndpoint=e}function o(e,t,o,s,a){function c(n,o,c){function u(e){r=e,e.Claims&&(r.Claims=g(e.Claims)),s.$$access_token=e.access_token,l.resolve(e),s.$broadcast(a.LOGIN_SUCCESS,r)}function f(e){l.reject(e)}var l=t.defer(),p=e({method:"POST",url:i.tokenEndpoint,transformRequest:d,data:{username:n,password:o,grant_type:"password"}});return p.success(u),p.error(f),l.promise}function u(){var e=t.defer();return o(function(){s.$broadcast(a.LOGOUT),r=null,e.resolve(),location.reload()},0),e.promise}function f(){var e=t.defer();return o(function(){r=null,e.resolve()},0),e.promise}function l(){return r}function d(e,t){var o=t();if(o["Content-type"]="application/x-www-form-urlencoded; charset=utf-8",!n.isObject(e))return null==e?"":e.toString();var r=[];for(var i in e)if(e.hasOwnProperty(i)){var s=e[i];r.push(encodeURIComponent(i)+"="+encodeURIComponent(null==s?"":s))}var a=r.join("&").replace(/%20/g,"+");return a}function g(e){var t=e.split("|"),o={};return n.forEach(t,function(e){var n=e.split(":");o[n[0]]?o[n[0]].push(n[1]):o[n[0]]=[n[1]]}),o}var p={login:c,logout:u,refresh:f,getSession:l};return r&&(s.$$access_token=r.access_token,s.$broadcast(a.LOGIN_SUCCESS,r)),p}var r=null,i={tokenEndpoint:"/token",refreshEndpoint:"/refresh",setSession:e,setTokenEndpoint:t,$get:["$http","$q","$timeout","$rootScope","AUTH_EVENTS",o]};return i}function s(e,t,o,r,i,s){var a=i.createLogger("AUTH INTERCEPTOR");return{request:function(n){return n.url.indexOf("api")!=-1&&e.$$access_token&&n.url.indexOf("postcodes.io")==-1&&n.url.indexOf("aircall")==-1&&n.url.indexOf("maps.googleapis")==-1&&(n.headers.Authorization="Bearer "+e.$$access_token),n},responseError:function(i){if(!n.isDefined(i.config.retry)||i.config.retry)switch(i.status){case 401:if(i.config.url.indexOf("aircall")==-1){a.warning("Request Rejected "+i.config.url);var c=t.defer();return r.append(i.config,c),e.$broadcast(o.LOGIN_REQUIRED,i),c.promise}case 403:a.warning("Request Refused "+i.config.url),e.$broadcast(o.FORBIDDEN,i);break;case 500:if("The operation cannot be completed because the DbContext has been disposed."==i.data.ExceptionMessage)return i.config.retry=!1,s.get("$http")(i.config)}return t.reject(i)}}}function a(e){function n(e,n){s.push({config:e,deferred:n})}function t(e){if(e)for(var n=0;n<s.length;n++)s[n].deferred.reject(e);else s.length=0}function o(){for(var e=0;e<s.length;e++)r(s[e].config,s[e].deferred)}function r(n,t){i=i||e.get("$http"),i(n).then(t.resolve,t.reject)}var i,s=[],a={append:n,rejectAll:t,retryAll:o};return a}var c=n.module("framework.services.auth",[]);c.config(t),c.run(o),c.controller("AuthLoginController",r),c.provider("Auth",i),c.factory("AuthHttpInterceptor",s),c.factory("AuthRequestBuffer",a),c.constant("AUTH_EVENTS",{LOGIN_SUCCESS:"AUTH_LOGIN_SUCCESS",LOGIN_FAILED:"AUTH_LOGIN_FAILED",LOGIN_EXPIRED:"AUTH_LOGIN_EXPIRED",LOGIN_REFRESHED:"AUTH_LOGIN_REFRESHED",LOGIN_REFRESH:"LOGIN_REFRESH",LOGIN_REQUIRED:"AUTH_LOGIN_REQUIRED",LOGOUT:"LOGOUT",FORBIDDEN:"AUTH_FORBIDDEN"}),t.$inject=["$stateProvider","$httpProvider"],o.$inject=["$rootScope","Logger","$http","Auth","$state","AUTH_EVENTS","AuthRequestBuffer","$config"],r.$inject=["$scope","Auth","$state","$stateParams","AuthRequestBuffer"],s.$inject=["$rootScope","$q","AUTH_EVENTS","AuthRequestBuffer","Logger","$injector"],a.$inject=["$injector"]}(window,angular);;;;
!function(o,n){function e(o){var e;if(e=localStorage.getItem("AUTH_TKN"))try{var t=n.fromJson(e);o.setSession(t)}catch(r){console.log(r)}}function t(n,e,t,r){n.$on(e.LOGIN_SUCCESS,function(o,n){t.AUTH_TKN=n}),n.$on(e.LOGIN_REFRESH,function(n,e){localStorage.setItem("AUTH_TKN",JSON.stringify(e)),console.log("refreshing"),o.location.hash.indexOf("login")!=-1&&(o.location.hash=""),location.reload()}),n.$on(e.LOGOUT,function(o){localStorage.removeItem("AUTH_TKN"),location.href=r.LOGIN_URL})}var r=n.module("framework.services.auth.persist",["framework.services.auth"]);r.config(e),r.run(t),e.$inject=["AuthProvider"],t.$inject=["$rootScope","AUTH_EVENTS","$localStorage","$config"]}(window,angular);;;;
!function(e,o){function n(){function e(e,n,t,c){function r(e){return n.open({templateUrl:"/e9_components/services/ImageUpload.modal.html",controller:"ImageUploadModalController",backdrop:"static",windowClass:"image-upload-modal",resolve:{modalConfig:function(){return e||{}}}}).result}function s(n,c){var r=new FormData;return r.append("file",n),e.post(t.API_ENDPOINT+"api/Image",r,{transformRequest:o.identity,headers:{"Content-Type":void 0},params:c})}function l(o){return e.get(t.API_ENDPOINT+"api/Image",{params:o})}function i(e){var o=c.defer(),n=new google.search.ImageSearch;return n.setResultSetSize(8),n.setSearchCompleteCallback(this,function(){n.results&&n.results.length>0?o.resolve(n.results):o.reject()},null),n.execute(e),o.promise}var a={openPicker:r,upload:s,current:l,performSearch:i};return a}var n={$get:["$http","$modal","$config","$q",e]};return n}function t(e,o,n,t,c,r){e.mode=t.mode,e.modes=t.modes||{UPLOAD:!0,SEARCH:!0,PREVIOUS:!0},e.upload={choosen:null,src:null,dimensions:null,allowRect:!0,uploadFull:function(){c.upload(e.upload.choosen,{type:t.type,id:t.id}).success(function(e){o.close(e[0])}).error(function(){console.log(arguments)})},uploadCropped:function(){c.upload(e.upload.choosen,{type:t.type,id:t.id,cropx:e.upload.dimensions.x,cropy:e.upload.dimensions.y,cropx2:e.upload.dimensions.x2,cropy2:e.upload.dimensions.y2,height:e.upload.dimensions.h,width:e.upload.dimensions.w}).success(function(e){o.close(e[0])}).error(function(){console.log(arguments)})}},e.$watch("upload.choosen.name + upload.choosen.size",function(o){if(o){var n=new FileReader;n.onload=function(o){e.upload.src=o.target.result,e.$apply()},n.readAsDataURL(e.upload.choosen)}else e.upload.src=null}),e.search={term:t.searchTerm||"",debounce:null,choosen:null,dimensions:null,allowRect:!0,fetchResults:function(){c.performSearch(e.search.term).then(function(o){e.search.results=o},function(){})},select:function(o){e.search.choosen=o.unescapedUrl},uploadFull:function(){c.upload(e.upload.choosen,{type:t.type,id:t.id,remote:e.search.choosen}).success(function(e){o.close(e[0])}).error(function(){console.log(arguments)})},uploadCropped:function(){c.upload(e.upload.choosen,{type:t.type,id:t.id,remote:e.search.choosen,cropx:e.search.dimensions.x,cropy:e.search.dimensions.y,cropx2:e.search.dimensions.x2,cropy2:e.search.dimensions.y2,height:e.search.dimensions.h,width:e.search.dimensions.w}).success(function(e){o.close(e[0])}).error(function(){console.log(arguments)})}},e.$watch("search.term",function(o){e.search.choosen=null,o?(e.search.debounce&&(n.cancel(e.search.debounce),e.search.debounce=null),e.search.debounce=n(function(){e.search.fetchResults()},1e3)):e.search.results=[]},!0),e.previous={list:[],accessors:{LogoUrl:function(e){return r.API_ENDPOINT+e}},getCurrent:function(){c.current({type:t.type,id:t.id}).success(function(o){e.previous.list=o}).error(function(){})},select:function(e){o.close(e)}},e.previous.getCurrent()}function c(){return{restrict:"A",scope:{source:"=",result:"=",allowRect:"="},link:function(e,o,n){function t(o){for(var n in o)o[n]=Math.round(o[n]);e.result=o}var c=null;e.$watch("source",function(r){if(c&&(c.destroy(),c=null),r){$(o).removeAttr("style"),$(o).attr("style","width:100%"),n.$set("src",r);var s=new Image;s.onload=function(){function n(){c.setSelect([10,10,110,110])}var r=s.height,l=s.width,i={trueSize:[l,r],boxWidth:320,allowSelect:!1,setSelect:[10,10,110,110],onSelect:t,onRelease:n};e.allowRect||(i.aspectRatio=1,i.minSize=[100,100]),$(o).Jcrop(i,function(){c=this}),e.$apply()},s.src=r}else n.$set("src",null)})}}}function r(e){return{scope:{file:"="},link:function(o,n,t){o.safeApply=function(e){var n=o.$$phase;"$apply"==n||"$digest"==n?e&&"function"==typeof e&&e():o.$apply()},n.bind("change",function(n){var t=n.target.files[0];t&&(o.file=t,e(o.safeApply,0))})}}}function s(e){return{scope:{file:"=",data:"="},link:function(o,n,t){o.safeApply=function(e){var n=o.$$phase;"$apply"==n||"$digest"==n?e&&"function"==typeof e&&e():o.$apply()},n.bind("change",function(n){var t=n.target.files[0];if(t){var c=new FileReader;c.readAsText(t),c.onload=function(n){o.data=n.target.result.substr(0,100)+"...",e(o.safeApply,0)},o.file=t,e(o.safeApply,0)}else o.file=null,e(o.safeApply,0)})}}}var l=o.module("framework.services.images",[]);l.provider("ImageUpload",n),l.controller("ImageUploadModalController",t),l.directive("filePicker",r),l.directive("fileDataPicker",s),l.directive("imageCropper",c),s.$inject=["$timeout"],t.$inject=["$scope","$modalInstance","$timeout","modalConfig","ImageUpload","$config"],r.$inject=["$timeout"]}(window,angular);;;;
!function(e,t){function n(){function e(e,t,n,o,a){function r(e){return t.open({templateUrl:"common_components/services/FileUpload.modal.html",controller:"FileUploadModalController",resolve:{modalConfig:function(){return e||{}}}}).result}function s(e,t){var r=o.defer(),s=new FormData;s.append("file",e),s.append("document",JSON.stringify(t));var A=new XMLHttpRequest;return A.upload.onprogress=function(e){a.$apply(function(){e.lengthComputable&&r.notify(Math.round(e.loaded/e.total*100))})},A.onload=function(e){4==e.target.readyState&&(200==e.target.status?r.resolve(JSON.parse(e.target.response)):r.reject(e.target.responseText))},A.onerror=function(e){r.reject(e)},A.onabort=function(e){r.reject(e)},A.open("POST",n.API_ENDPOINT+"api/File",!0),A.setRequestHeader("Authorization","Bearer "+a.$$access_token),A.setRequestHeader("Accept-Type","application/json"),A.send(s),r.promise}function A(e,t){var r=o.defer(),s=new FormData;s.append("file",e),s.append("document",JSON.stringify(t));var A=new XMLHttpRequest;return A.upload.onprogress=function(e){a.$apply(function(){e.lengthComputable&&r.notify(Math.round(e.loaded/e.total*100))})},A.onload=function(e){4==e.target.readyState&&(200==e.target.status?r.resolve(JSON.parse(e.target.response)):r.reject(e.target.responseText))},A.onerror=function(e){r.reject(e)},A.onabort=function(e){r.reject(e)},A.open("PUT",n.API_ENDPOINT+"api/File?documentId="+t.Id,!0),A.setRequestHeader("Authorization","Bearer "+a.$$access_token),A.setRequestHeader("Accept-Type","application/json"),A.send(s),r.promise}function l(t){var a=o.defer();return e["delete"](n.API_ENDPOINT+"api/File?documentId="+t).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise}function u(t){return e.get(n.API_ENDPOINT+"api/File",{params:t})}var i={openPicker:r,upload:s,update:A,"delete":l,current:u};return i}var t={$get:["$http","$modal","$config","$q","$rootScope",e]};return t}function o(e,t,n,o,a){e.upload={choosen:null,src:null,upload:function(){a.upload(e.upload.choosen,{type:o.type,id:o.id}).success(function(e){t.close(e[0])}).error(function(){console.log(arguments)})}},e.$watch("upload.choosen",function(t){if(t){var n=[".jpg",".jpeg",".png",".gif"],o=n.filter(function(e){return t.indexOf(e)>=0}).length>0;if(o){var a=new FileReader;a.onload=function(t){e.upload.src=t.target.result},a.readAsDataURL(t)}else e.upload.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADSCAAAAABRWhJzAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kDCgAsJjrEk6AAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAElklEQVR42u3YW2wUVRwG8M/d7ZbuktZaXghCBEtSVhBoqRsJ4otJNRqbhiaGiEq8PGC8xEvxSU3wEjVCNaaCmGggBJXEpKJAEIQHgzExpiTGQuRFMdaChbbsbltLu58P05mdc2bweSb99mVPvv+0Ob/MmTNn/+As+0BggQUWWGCBBRZYYIEFFlhggQUWWGCBBRZYYIEFFlhggQUWWGCBBRZYYIEFFlhggQUWWGCBBRZYYIEFFlhggQUWWGCBBRZYYIEFFlhggQUWWGCBBRZYYIEFFlhggQUWWGCBBRY4omDgxZlvkhx59dZsdsXLw8YFwNw7vnaH2fz+Sg4AXI0DTnIAzTP/x6vxJvSR/B7AOZJ9WBwBcNVZD9y/yJnoon4TDOCrynCvCf4QdztXtmFnAPwoukm+jirsJtmNxyIARpsLLi3FyiOF4tFVWFryXUBe2IT8zPCfx7HStyRIjmQSf5Lk+URm1AO7f70P95O8C09gI8l27I8A+B70zszxPSwrkGShCe8bYF5CjTscRrUJ5ma8RpLbsJkB8ADqpzmZSfyenE9O12MwAuAzqcXjzhzX43Mn/Ax3muDLfnCtBT6Fm8tkeQlOBcFsws/8AavYin724ZYobFp8FtucOd6AC074NxoM8MVH/Eu603yGyRxOkieQIwPPMJ/Eu3wTz7ELPezG05EAX27I/EGATOGqE04iZW9avd6wZcAGd2MT+SB2hIG/xH1sw0EeQifb0RsJMHvQad7hQeMOA9l13msJ2W9oLWkOVdeMjtSkhxiypC8l6ibmJkd4JTVvqj45HA3w1HJ89//PsDec+GJO+ic750bs2okHGAbmanyANSRvwx60MhpgHkfO2aVzRZIs5uxd2jfcjtayDT6B1jU4Hg5+AQvQRXIrGvFSVMBsB0AWG9F8tFg61my/h/3DyWXYZYPLjcCScjj4EIDDJA8D+DYy4HNp56S10NlsFvbzmmAeQ92AuTGRbwFvkGGbFgsppAokr6SQHosMmF3O9/ArKzKZ5dZZ2h5uQIcNHqxK/nUNMNciT5LMY71+LQkssMACCyywwLMWPNFQP05abUg3DTsn+0tAuuntafNsZpy4IgjeB+whrTakm4aB/SUAwNZ4gdcBa2m3Id00DGyWSu9gng2O9JL+Ffnb8QutNqSXBsF26V/MiRX4GXy0F0/RakN6aRBslca24944gceuz4yON9SVaLQhfakNNksA0g9fjNMz/CkeIp/HJzTakL7UBpslAFjQEydwHifJ367L02hD+lIbbJeununAjvgs6dPu7ThNXxvSSE1wsMQh3Bgf8BZ3/lvoa0MaqQkOljiE6tiAC7WJ887Lt7ZYaUOaqQEOlqbOdqA5NuDdlePVx/TakGZqNOjsEgAgdcTYqqK8abVUDtAt9NqQZmqA7RKQnL/hR8YGrJ+HAgsssMACCyywwAILLLDAAgsssMACCyywwAILLLDAAgsssMACCyywwAILLLDAAgsssMACCyywwAILLLDAAgsssMACCyywwAILLLDAAgsssMACCyywwAILLLDAAgsssMACCyywwLPp8x9MOC7ZMPt+VQAAAABJRU5ErkJggg=="}else e.upload.src=null},!0)}var a=t.module("framework.services.documents",[]);a.provider("FileUpload",n),a.controller("FileUploadModalController",o),o.$inject=["$scope","$modalInstance","$timeout","modalConfig","FileUpload"]}(window,angular);;;;
!function(){var n=angular.module("framework.services.csv",[]);n.service("CSV",function(){function n(n){var r=[],a=[];for(var o in n[0])"$"!=o[0]&&a.push(e(o));r.push(a.map(function(n){return'"'+n+'"'}).join(","));for(var t=0;t<n.length;t++){for(var u=n[t],c=[],i=0;i<a.length;i++){var l=a[i];c.push('"'+e(u[l])+'"')}r.push(c.join(","))}return r.join("\n")}function r(r,e){var a=n(r),o=document.createElement("a");o.href="data:attachment/csv,"+encodeURIComponent(a),o.target="_blank",o.download=e+".csv",document.body.appendChild(o),o.click()}function e(n){return angular.isDefined(n)?(""+n).replace('"','"'):"<null>"}return{fromArray:n,download:r}})}();;;;
!function(){var n=angular.module("framework.services.signalr",[]);n.provider("SignalR",function(){function n(n,c,s){function u(){var o=n.defer();return this.hub.connection.url=t,this.hub.connection.qs=e,angular.forEach(i,function(n){this.hub.client[n]=function(){c.$broadcast("SIGNALR_"+n,arguments)}},this),this.server=this.hub.server,this.running=!0,this.hub.connection.disconnected(function(){c.SIGNALR.status=0,console.log("SignalR: Disconnected"),c.$apply(),s(function(){this.hub.connection.start().done(function(){c.SIGNALR.status=4,console.log("SignalR: Connected"),c.$apply()})},1e3)}),this.hub.connection.starting(function(){c.SIGNALR.status=1,console.log("SignalR: Starting"),c.$apply()}),this.hub.connection.reconnecting(function(){c.SIGNALR.status=2,console.log("SignalR: Reconnecting"),c.$apply()}),this.hub.connection.connectionSlow(function(){c.SIGNALR.status=3,console.log("SignalR: Connection Slow"),c.$apply(),s(function(){c.SIGNALR.status=4,console.log("SignalR: Connection Restored"),c.$apply()},4e3)}),this.hub.connection.reconnected(function(){c.SIGNALR.status=4,console.log("SignalR: Reconnected"),c.$apply()}),this.hub.connection.start().done(function(){c.SIGNALR.status=4,console.log("SignalR: Connected"),o.resolve()}),o.promise}var r={hub:$.connection[o],running:!1,setHub:function(n){o=n},setEndpoint:function(n){t=n},setQueryValue:function(n,t){e[n]=t},registerEvent:function(n){i.push(n)},start:u,server:null};return c.SIGNALR={status:0},r}var t="",o="",e={},i=[];return{setHub:function(n){o=n},setEndpoint:function(n){t=n},setQueryValue:function(n,t){e[n]=t},registerEvent:function(n){i.push(n)},$get:["$q","$rootScope","$timeout",n]}})}();;;;
!function(){function e(e){this.Maps={Directions:e}}function o(){function e(e){angular.extend(t,e)}function o(e){function o(o,n){var r=e.defer(),s=angular.extend({},t,n);return s.origin=o[0],s.destination=o[o.length-1],o.length>2&&(s.waypoints=o.slice(1,o.length-1).map(function(e){return{location:e,stopover:!1}})),i.route(s,function(e,o){o===google.maps.DirectionsStatus.OK?r.resolve(e):r.reject(o)}),r.promise}return i=i||new google.maps.DirectionsService,this.route=o,this}var i=null,t={avoidFerries:!1,avoidHighways:!0,avoidTolls:!1,optimizeWaypoints:!1,region:"GB",travelMode:google.maps.TravelMode.DRIVING};this.setDefaults=e,this.$get=o,o.$inject=["$q"]}var i=angular.module("framework.services.google",[]);i.service("Google",e),i.provider("GoogleDirections",o),e.$inject=["GoogleDirections"]}();;;;
!function(n,e){function t(n){n.localeLocationPattern("https://code.angularjs.org/1.4.6/i18n/angular-locale_{{locale}}.js")}function r(){function n(n,u,i,c,a){function f(){function o(){var t=i.defer();return n.get(u.API_ENDPOINT+"/api/Currencies").success(function(n){e=n,t.resolve(e)}).error(function(n){t.reject(n)}),t.promise}function c(n){var t=e.filter(function(e){return e.Id==n})[0];return t}function a(n){var o=e.filter(function(e){return e.Id==n})[0];t||r||(r=o),t=o}function f(){return t}function l(n,o,u){var i=r,c=1,a=t;if(o){var f=e.filter(function(n){return n.Id==o})[0];a=f}return u&&(i=e.filter(function(n){return n.Id==u})[0]),c=a.CurrentRate/i.CurrentRate,Math.round(n*c*100)/100}var s={currencies:o,getById:c,setCurrent:a,getCurrent:f,convert:l};return s}function l(){function n(n){if(o){var e=moment.tz(n,o).format();return e}return new moment(n).subtract((new Date).getTimezoneOffset(),"minutes").format()}function e(n){o=n}function t(){return o}var r={timeZoneDateTime:n,setTimeZone:e,getTimeZone:t};return r}function s(n){var e=null;e=1==n?{unitSystem:google.maps.UnitSystem.METRIC}:{unitSystem:google.maps.UnitSystem.IMPERIAL},a.setDefaults(e)}var m={currency:f,timeZone:l,useMetric:s};return m}var e=[],t=null,r=null,o=null,u={$get:["$http","$config","$q","$locale","GoogleDirections",n]};return u}function o(n,e){e.DATETIME_FORMAT="dd/MM/yyyy",e.$on("$localeChangeSuccess",function(){e.DATETIME_FORMAT=n.DATETIME_FORMATS.shortDate})}var u=e.module("framework.services.currency",["tmh.dynamicLocale"]);u.config(t),u.provider("Localisation",r),u.run(o),t.$inject=["tmhDynamicLocaleProvider"],o.$inject=["$locale","$rootScope"]}(window,angular);;;;
!function(){"use strict";var e={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){var c=t.which;switch(c){case e.COMMAND:case e.SHIFT:case e.CTRL:case e.ALT:return!0}return!!t.metaKey},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123},isVerticalMovement:function(t){return~[e.UP,e.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[e.LEFT,e.RIGHT,e.BACKSPACE,e.DELETE].indexOf(t)}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],c=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(c.bind(t)(e))return t;t=t.parentElement}return!1});var t=0,c=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,generateId:function(){return t++},appendToBody:!1}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments),c=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(c)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,c,i,s){s(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,c){return c&&t?t.replace(new RegExp(e(c),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(e,t){return function(c){var i=c[0].getBoundingClientRect();return{width:i.width||c.prop("offsetWidth"),height:i.height||c.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);c.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile",function(e,t,c,i){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){var c=t.parent().attr("theme")||e.theme;return c+"/choices.tpl.html"},compile:function(s,l){if(!l.repeat)throw c("repeat","Expected 'repeat' expression.");return function(s,l,n,a,r){var o=n.groupBy;if(a.parseRepeatAttr(n.repeat,o),a.disableChoiceExpression=n.uiDisableChoice,a.onHighlightCallback=n.onHighlight,o){var u=l.querySelectorAll(".ui-select-choices-group");if(1!==u.length)throw c("rows","Expected 1 .ui-select-choices-group but got '{0}'.",u.length);u.attr("ng-repeat",t.getGroupNgRepeatExpression())}var d=l.querySelectorAll(".ui-select-choices-row");if(1!==d.length)throw c("rows","Expected 1 .ui-select-choices-row but got '{0}'.",d.length);d.attr("ng-repeat",t.getNgRepeatExpression(a.parserResult.itemName,"$select.items",a.parserResult.trackByExp,o)).attr("ng-if","$select.open").attr("ng-mouseenter","$select.setActiveItem("+a.parserResult.itemName+")").attr("ng-click","$select.select("+a.parserResult.itemName+",false,$event)");var p=l.querySelectorAll(".ui-select-choices-row-inner");if(1!==p.length)throw c("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",p.length);p.attr("uis-transclude-append",""),i(l,r)(s),s.$watch("$select.search",function(e){e&&!a.open&&a.multiple&&a.activate(!1,!0),a.activeIndex=a.tagging.isActivated?-1:0,a.refresh(n.refresh)}),n.$observe("refreshDelay",function(){var t=s.$eval(n.refreshDelay);a.refreshDelay=void 0!==t?t:e.refreshDelay})}}}}]),c.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","uisRepeatParser","uiSelectMinErr","uiSelectConfig",function(t,c,i,s,l,n,a){function r(){(d.resetSearchInput||void 0===d.resetSearchInput&&a.resetSearchInput)&&(d.search=p,d.selected&&d.items.length&&!d.multiple&&(d.activeIndex=d.items.indexOf(d.selected)))}function o(t){var c=!0;switch(t){case e.DOWN:!d.open&&d.multiple?d.activate(!1,!0):d.activeIndex<d.items.length-1&&d.activeIndex++;break;case e.UP:!d.open&&d.multiple?d.activate(!1,!0):(d.activeIndex>0||0===d.search.length&&d.tagging.isActivated&&d.activeIndex>-1)&&d.activeIndex--;break;case e.TAB:d.multiple&&!d.open||d.select(d.items[d.activeIndex],!0);break;case e.ENTER:d.open&&d.activeIndex>=0?d.select(d.items[d.activeIndex]):d.activate(!1,!0);break;case e.ESC:d.close();break;default:c=!1}return c}function u(){var e=c.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw n("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(!(d.activeIndex<0)){var i=t[d.activeIndex],s=i.offsetTop+i.clientHeight-e[0].scrollTop,l=e[0].offsetHeight;s>l?e[0].scrollTop+=s-l:s<i.clientHeight&&(d.isGrouped&&0===d.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=i.clientHeight-s)}}var d=this,p="";if(d.placeholder=a.placeholder,d.searchEnabled=a.searchEnabled,d.sortable=a.sortable,d.refreshDelay=a.refreshDelay,d.removeSelected=!1,d.closeOnSelect=!0,d.search=p,d.activeIndex=0,d.items=[],d.open=!1,d.focus=!1,d.disabled=!1,d.selected=void 0,d.focusser=void 0,d.resetSearchInput=!0,d.multiple=void 0,d.disableChoiceExpression=void 0,d.tagging={isActivated:!1,fct:void 0},d.taggingTokens={isActivated:!1,tokens:void 0},d.lockChoiceExpression=void 0,d.clickTriggeredSelect=!1,d.$filter=s,d.searchInput=c.querySelectorAll("input.ui-select-search"),1!==d.searchInput.length)throw n("searchInput","Expected 1 input.ui-select-search but got '{0}'.",d.searchInput.length);d.isEmpty=function(){return angular.isUndefined(d.selected)||null===d.selected||""===d.selected},d.activate=function(e,c){d.disabled||d.open||(c||r(),t.$broadcast("uis:activate"),d.open=!0,d.activeIndex=d.activeIndex>=d.items.length?0:d.activeIndex,d.activeIndex===-1&&d.taggingLabel!==!1&&(d.activeIndex=0),i(function(){d.search=e||d.search,d.searchInput[0].focus()}))},d.findGroupByName=function(e){return d.groups&&d.groups.filter(function(t){return t.name===e})[0]},d.parseRepeatAttr=function(e,c){function i(e){d.groups=[],angular.forEach(e,function(e){var i=t.$eval(c),s=angular.isFunction(i)?i(e):e[i],l=d.findGroupByName(s);l?l.items.push(e):d.groups.push({name:s,items:[e]})}),d.items=[],d.groups.forEach(function(e){d.items=d.items.concat(e.items)})}function s(e){d.items=e}d.setItemsFn=c?i:s,d.parserResult=l.parse(e),d.isGrouped=!!c,d.itemProperty=d.parserResult.itemName,d.refreshItems=function(e){e=e||d.parserResult.source(t);var c=d.selected;if(angular.isArray(c)&&!c.length||!d.removeSelected)d.setItemsFn(e);else if(void 0!==e){var i=e.filter(function(e){return c.indexOf(e)<0});d.setItemsFn(i)}},t.$watchCollection(d.parserResult.source,function(e){if(void 0===e||null===e)d.items=[];else{if(!angular.isArray(e))throw n("items","Expected an array but got '{0}'.",e);d.refreshItems(e),d.ngModel.$modelValue=null}})};var h;d.refresh=function(e){void 0!==e&&(h&&i.cancel(h),h=i(function(){t.$eval(e)},d.refreshDelay))},d.setActiveItem=function(e){d.activeIndex=d.items.indexOf(e)},d.isActive=function(e){if(!d.open)return!1;var t=d.items.indexOf(e[d.itemProperty]),c=t===d.activeIndex;return!(!c||t<0&&d.taggingLabel!==!1||t<0&&d.taggingLabel===!1)&&(c&&!angular.isUndefined(d.onHighlightCallback)&&e.$eval(d.onHighlightCallback),c)},d.isDisabled=function(e){if(d.open){var t,c=d.items.indexOf(e[d.itemProperty]),i=!1;return c>=0&&!angular.isUndefined(d.disableChoiceExpression)&&(t=d.items[c],i=!!e.$eval(d.disableChoiceExpression),t._uiSelectChoiceDisabled=i),i}},d.select=function(e,c,s){if(void 0===e||!e._uiSelectChoiceDisabled){if(!d.items&&!d.search)return;if(!e||!e._uiSelectChoiceDisabled){if(d.tagging.isActivated){if(d.taggingLabel===!1)if(d.activeIndex<0){if(e=void 0!==d.tagging.fct?d.tagging.fct(d.search):d.search,!e||angular.equals(d.items[0],e))return}else e=d.items[d.activeIndex];else if(0===d.activeIndex){if(void 0===e)return;if(void 0!==d.tagging.fct&&"string"==typeof e){if(e=d.tagging.fct(d.search),!e)return}else"string"==typeof e&&(e=e.replace(d.taggingLabel,"").trim())}if(d.selected&&angular.isArray(d.selected)&&d.selected.filter(function(t){return angular.equals(t,e)}).length>0)return void d.close(c)}t.$broadcast("uis:select",e);var l={};l[d.parserResult.itemName]=e;var n=d.search;i(function(){d.onSelectCallback(t,{$item:e,$search:n,$model:d.parserResult.modelMapper(t,l)})}),d.closeOnSelect&&d.close(c),s&&"click"===s.type&&(d.clickTriggeredSelect=!0)}}},d.close=function(e){d.open&&(d.ngModel&&d.ngModel.$setTouched&&d.ngModel.$setTouched(),r(),d.open=!1,t.$broadcast("uis:close",e))},d.setFocus=function(){d.focus||d.focusInput[0].focus()},d.clear=function(e){d.select(void 0),e.stopPropagation(),d.focusser[0].focus()},d.toggle=function(e){d.open?(d.close(),e.preventDefault(),e.stopPropagation()):d.activate()},d.isLocked=function(e,t){var c,i=d.selected[t];return i&&!angular.isUndefined(d.lockChoiceExpression)&&(c=!!e.$eval(d.lockChoiceExpression),i._uiSelectChoiceLocked=c),c};var g=null;d.sizeSearchInput=function(){var e=d.searchInput[0],c=d.searchInput.parent().parent()[0],s=function(){return c.clientWidth*!!e.offsetParent},l=function(t){if(0===t)return!1;var c=t-e.offsetLeft-10;return c<50&&(c=t),d.searchInput.css("width",c+"px"),!0};d.searchInput.css("width","10px"),i(function(){null!==g||l(s())||(g=t.$watch(s,function(e){l(e)&&(g(),g=null)}))})},d.searchInput.on("keydown",function(c){var s=c.which;t.$apply(function(){var t=!1;if((d.items.length>0||d.tagging.isActivated)&&(o(s),d.taggingTokens.isActivated)){for(var l=0;l<d.taggingTokens.tokens.length;l++)d.taggingTokens.tokens[l]===e.MAP[c.keyCode]&&d.search.length>0&&(t=!0);t&&i(function(){d.searchInput.triggerHandler("tagged");var t=d.search.replace(e.MAP[c.keyCode],"").trim();d.tagging.fct&&(t=d.tagging.fct(t)),t&&d.select(t,!0)})}}),e.isVerticalMovement(s)&&d.items.length>0&&u()}),d.searchInput.on("paste",function(e){var t=e.originalEvent.clipboardData.getData("text/plain");if(t&&t.length>0&&d.taggingTokens.isActivated&&d.tagging.fct){var c=t.split(d.taggingTokens.tokens[0]);c&&c.length>0&&(angular.forEach(c,function(e){var t=d.tagging.fct(e);t&&d.select(t,!0)}),e.preventDefault(),e.stopPropagation())}}),d.searchInput.on("tagged",function(){i(function(){r()})}),t.$on("$destroy",function(){d.searchInput.off("keyup keydown tagged blur paste")})}]),c.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,c,i,s,l,n){return{restrict:"EA",templateUrl:function(e,c){var i=c.theme||t.theme;return i+(angular.isDefined(c.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(s,a){return angular.isDefined(a.multiple)?s.append("<ui-select-multiple/>").removeAttr("multiple"):s.append("<ui-select-single/>"),function(s,a,r,o,u){function d(e){if(g.open){var t=!1;if(t=window.jQuery?window.jQuery.contains(a[0],e.target):a[0].contains(e.target),!t&&!g.clickTriggeredSelect){var c=["input","button","textarea"],i=angular.element(e.target).scope(),l=i&&i.$select&&i.$select!==g;l||(l=~c.indexOf(e.target.tagName.toLowerCase())),g.close(l),s.$digest()}g.clickTriggeredSelect=!1}}function p(){var t=i(a);m=angular.element('<div class="ui-select-placeholder"></div>'),m[0].style.width=t.width+"px",m[0].style.height=t.height+"px",a.after(m),$=a[0].style.width,e.find("body").append(a),a[0].style.position="absolute",a[0].style.left=t.left+"px",a[0].style.top=t.top+"px",a[0].style.width=t.width+"px"}function h(){null!==m&&(m.replaceWith(a),m=null,a[0].style.position="",a[0].style.left="",a[0].style.top="",a[0].style.width=$)}var g=o[0],f=o[1];g.generatedId=t.generateId(),g.baseTitle=r.title||"Select box",g.focusserTitle=g.baseTitle+" focus",g.focusserId="focusser-"+g.generatedId,g.closeOnSelect=function(){return angular.isDefined(r.closeOnSelect)?l(r.closeOnSelect)():t.closeOnSelect}(),g.onSelectCallback=l(r.onSelect),g.onRemoveCallback=l(r.onRemove),g.ngModel=f,g.choiceGrouped=function(e){return g.isGrouped&&e&&e.name},r.tabindex&&r.$observe("tabindex",function(e){g.focusInput.attr("tabindex",e),a.removeAttr("tabindex")}),s.$watch("searchEnabled",function(){var e=s.$eval(r.searchEnabled);g.searchEnabled=void 0!==e?e:t.searchEnabled}),s.$watch("sortable",function(){var e=s.$eval(r.sortable);g.sortable=void 0!==e?e:t.sortable}),r.$observe("disabled",function(){g.disabled=void 0!==r.disabled&&r.disabled}),r.$observe("resetSearchInput",function(){var e=s.$eval(r.resetSearchInput);g.resetSearchInput=void 0===e||e}),r.$observe("tagging",function(){if(void 0!==r.tagging){var e=s.$eval(r.tagging);g.tagging={isActivated:!0,fct:e!==!0?e:void 0}}else g.tagging={isActivated:!1,fct:void 0}}),r.$observe("taggingLabel",function(){void 0!==r.tagging&&("false"===r.taggingLabel?g.taggingLabel=!1:g.taggingLabel=void 0!==r.taggingLabel?r.taggingLabel:"(new)")}),r.$observe("taggingTokens",function(){if(void 0!==r.tagging){var e=void 0!==r.taggingTokens?r.taggingTokens.split("|"):[",","ENTER"];g.taggingTokens={isActivated:!0,tokens:e}}}),angular.isDefined(r.autofocus)&&n(function(){g.setFocus()}),angular.isDefined(r.focusOn)&&s.$on(r.focusOn,function(){n(function(){g.setFocus()})}),e.on("click",d),s.$on("$destroy",function(){e.off("click",d)}),u(s,function(e){var t=angular.element("<div>").append(e),i=t.querySelectorAll(".ui-select-match");if(i.removeAttr("ui-select-match"),i.removeAttr("data-ui-select-match"),1!==i.length)throw c("transcluded","Expected 1 .ui-select-match but got '{0}'.",i.length);a.querySelectorAll(".ui-select-match").replaceWith(i);var s=t.querySelectorAll(".ui-select-choices");if(s.removeAttr("ui-select-choices"),s.removeAttr("data-ui-select-choices"),1!==s.length)throw c("transcluded","Expected 1 .ui-select-choices but got '{0}'.",s.length);a.querySelectorAll(".ui-select-choices").replaceWith(s)});var v=s.$eval(r.appendToBody);(void 0!==v?v:t.appendToBody)&&(s.$watch("$select.open",function(e){e?p():h()}),s.$on("$destroy",function(){h()}));var m=null,$=""}}}}]),c.directive("uiSelectMatch",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){var c=t.parent().attr("theme")||e.theme,i=t.parent().attr("multiple");return c+(i?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,c,i,s){function l(e){s.allowClear=!!angular.isDefined(e)&&(""===e||"true"===e.toLowerCase())}s.lockChoiceExpression=i.uiLockChoice,i.$observe("placeholder",function(t){s.placeholder=void 0!==t?t:e.placeholder}),i.$observe("allowClear",l),l(i.allowClear),s.multiple&&s.sizeSearchInput()}}}]),c.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(t,c){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var c,i=this,s=e.$select;e.$evalAsync(function(){c=e.ngModel}),i.activeMatchIndex=-1,i.updateModel=function(){c.$setViewValue(Date.now()),i.refreshComponent()},i.refreshComponent=function(){s.refreshItems(),s.sizeSearchInput()},i.removeChoice=function(c){var l=s.selected[c];if(!l._uiSelectChoiceLocked){var n={};n[s.parserResult.itemName]=l,s.selected.splice(c,1),i.activeMatchIndex=-1,s.sizeSearchInput(),t(function(){s.onRemoveCallback(e,{$item:l,$model:s.parserResult.modelMapper(e,n)})}),i.updateModel()}},i.getPlaceholder=function(){if(!s.selected.length)return s.placeholder}}],controllerAs:"$selectMultiple",link:function(i,s,l,n){function a(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}function r(t){function c(){switch(t){case e.LEFT:return~h.activeMatchIndex?u:n;case e.RIGHT:return~h.activeMatchIndex&&r!==n?o:(d.activate(),!1);case e.BACKSPACE:return~h.activeMatchIndex?(h.removeChoice(r),u):n;case e.DELETE:return!!~h.activeMatchIndex&&(h.removeChoice(h.activeMatchIndex),r)}}var i=a(d.searchInput[0]),s=d.selected.length,l=0,n=s-1,r=h.activeMatchIndex,o=h.activeMatchIndex+1,u=h.activeMatchIndex-1,p=r;return!(i>0||d.search.length&&t==e.RIGHT)&&(d.close(),p=c(),d.selected.length&&p!==!1?h.activeMatchIndex=Math.min(n,Math.max(l,p)):h.activeMatchIndex=-1,!0)}function o(e){if(void 0===e||void 0===d.search)return!1;var t=e.filter(function(e){return void 0!==d.search.toUpperCase()&&void 0!==e&&e.toUpperCase()===d.search.toUpperCase()}).length>0;return t}function u(e,t){var c=-1;if(angular.isArray(e))for(var i=angular.copy(e),s=0;s<i.length;s++)if(void 0===d.tagging.fct)i[s]+" "+d.taggingLabel===t&&(c=s);else{var l=i[s];l.isTag=!0,angular.equals(l,t)&&(c=s)}return c}var d=n[0],p=i.ngModel=n[1],h=i.$selectMultiple;d.multiple=!0,d.removeSelected=!0,d.focusInput=d.searchInput,p.$parsers.unshift(function(){for(var e,t={},c=[],s=d.selected.length-1;s>=0;s--)t={},t[d.parserResult.itemName]=d.selected[s],e=d.parserResult.modelMapper(i,t),c.unshift(e);return c}),p.$formatters.unshift(function(e){var t,c=d.parserResult.source(i,{$select:{search:""}}),s={};if(!c)return e;var l=[],n=function(e,c){if(e&&e.length){for(var n=e.length-1;n>=0;n--){if(s[d.parserResult.itemName]=e[n],t=d.parserResult.modelMapper(i,s),d.parserResult.trackByExp){var a=/\.(.+)/.exec(d.parserResult.trackByExp);if(a.length>0&&t[a[1]]==c[a[1]])return l.unshift(e[n]),!0}if(angular.equals(t,c))return l.unshift(e[n]),!0}return!1}};if(!e)return l;for(var a=e.length-1;a>=0;a--)n(d.selected,e[a])||n(c,e[a])||l.unshift(e[a]);return l}),i.$watchCollection(function(){return p.$modelValue},function(e,t){t!=e&&(p.$modelValue=null,h.refreshComponent())}),p.$render=function(){if(!angular.isArray(p.$viewValue)){if(!angular.isUndefined(p.$viewValue)&&null!==p.$viewValue)throw t("multiarr","Expected model value to be array but got '{0}'",p.$viewValue);d.selected=[]}d.selected=p.$viewValue,i.$evalAsync()},i.$on("uis:select",function(e,t){d.selected.push(t),h.updateModel()}),i.$on("uis:activate",function(){h.activeMatchIndex=-1}),i.$watch("$select.disabled",function(e,t){t&&!e&&d.sizeSearchInput()}),d.searchInput.on("keydown",function(t){var c=t.which;i.$apply(function(){var i=!1;e.isHorizontalMovement(c)&&(i=r(c)),i&&c!=e.TAB&&(t.preventDefault(),t.stopPropagation())})}),d.searchInput.on("keyup",function(t){if(e.isVerticalMovement(t.which)||i.$evalAsync(function(){d.activeIndex=d.taggingLabel===!1?-1:0}),d.tagging.isActivated&&d.search.length>0){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||e.isVerticalMovement(t.which))return;if(d.activeIndex=d.taggingLabel===!1?-1:0,d.taggingLabel===!1)return;var c,s,l,n,a=angular.copy(d.items),r=angular.copy(d.items),p=!1,h=-1;if(void 0!==d.tagging.fct){if(l=d.$filter("filter")(a,{isTag:!0}),l.length>0&&(n=l[0]),a.length>0&&n&&(p=!0,a=a.slice(1,a.length),r=r.slice(1,r.length)),c=d.tagging.fct(d.search),c.isTag=!0,r.filter(function(e){return angular.equals(e,d.tagging.fct(d.search))}).length>0)return;c.isTag=!0}else{if(l=d.$filter("filter")(a,function(e){return e.match(d.taggingLabel)}),l.length>0&&(n=l[0]),s=a[0],void 0!==s&&a.length>0&&n&&(p=!0,a=a.slice(1,a.length),r=r.slice(1,r.length)),c=d.search+" "+d.taggingLabel,u(d.selected,d.search)>-1)return;if(o(r.concat(d.selected)))return void(p&&(a=r,i.$evalAsync(function(){d.activeIndex=0,d.items=a})));if(o(r))return void(p&&(d.items=r.slice(1,r.length)))}p&&(h=u(d.selected,c)),h>-1?a=a.slice(h+1,a.length-1):(a=[],a.push(c),a=a.concat(r)),i.$evalAsync(function(){d.activeIndex=0,d.items=a})}}),d.searchInput.on("blur",function(){c(function(){h.activeMatchIndex=-1})})}}}]),c.directive("uiSelectSingle",["$timeout","$compile",function(t,c){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(i,s,l,n){var a=n[0],r=n[1];r.$parsers.unshift(function(e){var t,c={};return c[a.parserResult.itemName]=e,t=a.parserResult.modelMapper(i,c)}),r.$formatters.unshift(function(e){var t,c=a.parserResult.source(i,{$select:{search:""}}),s={};if(c){var l=function(c){return s[a.parserResult.itemName]=c,t=a.parserResult.modelMapper(i,s),t==e};if(a.selected&&l(a.selected))return a.selected;for(var n=c.length-1;n>=0;n--)if(l(c[n]))return c[n]}return e}),i.$watch("$select.selected",function(e){r.$viewValue!==e&&r.$setViewValue(e)}),r.$render=function(){a.selected=r.$viewValue},i.$on("uis:select",function(e,t){a.selected=t}),i.$on("uis:close",function(e,c){t(function(){a.focusser.prop("disabled",!1),c||a.focusser[0].focus()},0,!1)}),i.$on("uis:activate",function(){o.prop("disabled",!0)});var o=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");c(o)(i),a.focusser=o,a.focusInput=o,s.parent().append(o),o.bind("focus",function(){i.$evalAsync(function(){a.focus=!0})}),o.bind("blur",function(){i.$evalAsync(function(){a.focus=!1})}),o.bind("keydown",function(t){return t.which===e.BACKSPACE?(t.preventDefault(),t.stopPropagation(),a.select(void 0),void i.$apply()):void(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||(t.which!=e.DOWN&&t.which!=e.UP&&t.which!=e.ENTER&&t.which!=e.SPACE||(t.preventDefault(),t.stopPropagation(),a.activate()),i.$digest()))}),o.bind("keyup input",function(t){t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||t.which==e.ENTER||t.which===e.BACKSPACE||(a.activate(o.val()),o.val(""),i.$digest())})}}}]),c.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,c){return{require:"^uiSelect",link:function(t,i,s,l){if(null===t[s.uiSelectSort])throw c("sort","Expected a list to sort");var n=angular.extend({axis:"horizontal"},t.$eval(s.uiSelectSortOptions)),a=n.axis,r="dragging",o="dropping",u="dropping-before",d="dropping-after";t.$watch(function(){return l.sortable},function(e){e?i.attr("draggable",!0):i.removeAttr("draggable")}),i.on("dragstart",function(e){i.addClass(r),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text/plain",t.$index)}),i.on("dragend",function(){i.removeClass(r)});var p,h=function(e,t){this.splice(t,0,this.splice(e,1)[0])},g=function(e){e.preventDefault();var t="vertical"===a?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this["vertical"===a?"offsetHeight":"offsetWidth"]/2?(i.removeClass(d),i.addClass(u)):(i.removeClass(u),i.addClass(d))},f=function(t){t.preventDefault();var c=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text/plain"),10);e.cancel(p),p=e(function(){v(c)},20)},v=function(e){var c=t.$eval(s.uiSelectSort),l=c[e],n=null;n=i.hasClass(u)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,h.apply(c,[e,n]),t.$apply(function(){t.$emit("uiSelectSort:change",{array:c,item:l,from:e,to:n})}),i.removeClass(o),i.removeClass(u),i.removeClass(d),i.off("drop",f)};i.on("dragenter",function(){i.hasClass(r)||(i.addClass(o),i.on("dragover",g),i.on("drop",f))}),i.on("dragleave",function(e){e.target==i&&(i.removeClass(o),i.removeClass(u),i.removeClass(d),i.off("dragover",g),i.off("drop",f))})}}}]),c.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var c=this;c.parse=function(c){var i=c.match(/^\s*(?:([\s\S]+?)\s+as\s+)?([\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!i)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);return{itemName:i[2],source:t(i[3]),trackByExp:i[4],modelMapper:t(i[1]||i[2])}},c.getGroupNgRepeatExpression=function(){return"$group in $select.groups"},c.getNgRepeatExpression=function(e,t,c,i){var s=e+" in "+(i?"$group.items":t);return c&&(s+=" track by "+c),s}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content dropdown-menu" role="listbox" ng-show="$select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><a href="javascript:void(0)" class="ui-select-choices-row-inner"></a></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>'),e.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>'),
e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>')}]);;;;
!function(t){"use strict";function i(t){return{restrict:"A",link:function(i,n,e){i.$watch(function(){return i.$eval(e.bindHtmlCompile)},function(e){n.html(e),t(n.contents())(i)})}}}var n=t.module("framework.directives.utils",[]);n.directive("bindHtmlCompile",["$compile",i])}(angular);;;;
!function(e){function r(e,r,t){return{restrict:"E",transclude:!0,replace:!0,scope:!0,template:function(e,r){var t="";return t+='<div class="card"><a  class="card-container"',"false"!=r.allowclick&&(t+=' ng-href="{{getLinkUrl()}}"'),t+='><svg holder class="logo holderjs" style="background-image:url({{accessors.LogoUrl(item)}})" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="transparent" stroke-width="10" stroke-linecap="round" class="ng-hide" ng-show="showScore==true" stroke-location="outside"></circle></svg>',"false"!=r.showTitle&&(t+='<strong ng-bind-html="accessors.Title(item)|Truncate:35"></strong>'),"false"!=r.showSubtitle&&(t+='<small ng-show="accessors.SubTitle(item)!=\'null\'" ng-bind-html="accessors.SubTitle(item)"></small>'),t+="</a></div>"},link:function(r,s,c,i,a){function o(){if(r.item&&r.item.Id){var t={};return c.id?t[c.id]=r.item.Id:t.Id=r.item.Id,e.href(r.rNavTo||c.rNavTo,t)}}function n(t){e.get(r.rNavTo)&&e.go(r.rNavTo,{Id:t.Id})}if(c.item&&(r.item=t(c.item)(r),r.$watch(function(){return t(c.item)(r)},function(e){r.item=e})),c.accessors&&(r.accessors=t(c.accessors)(r),r.$watch(function(){return t(c.accessors)(r)},function(e){r.accessors=e})),r.viewItem=n,r.getLinkUrl=o,r.accessors.Score){var l=2*Math.PI*50/5*r.accessors.Score(r.item),d=l<90?"red":l>=90&&l<180?"orange":l>=180&&l<270?"rgb(25, 195, 45)":"rgb(25, 195, 45);";s.find("circle").attr("stroke",d).attr("stroke-dasharray",l+",10000")}}}}var t=e.module("framework.directives.UI",[]);t.directive("card",r),r.$inject=["$state","$interval","$parse"]}(angular);;;;
!function(e){function t(e){return{restrict:"A",scope:!0,transclude:!0,template:function(e,t){return'<ng-form name="formFor.form" class="transclude-target" autocomplete="off" novalidate></ng-form>'},link:function(t,n,i,r,l){t.formFor=t.formFor||{},t.formFor.target=t.$eval(i.formFor),t.formFor.schema=i.schema?e[i.schema].$schema:t.target.$$schema,t.formFor.mode="EDIT",t.formFor.opened={},t.preventDefault=function(e){},t.$watch(function(){return t.$eval(i.formFor)},function(e){t.formFor.target=e},!1),i.mode&&(t.formFor.mode=i.mode,i.$observe("mode",function(e){t.formFor.mode=e})),l(t,function(e,t){n.children(".transclude-target").append(e)})}}}function n(t,n){var i={inputType:"text",required:!1,selectTheme:"selectize",selectSelectedTemplate:'<div class="select-text"><img class="img-responsive img-circle" ng-if="$select.selected.ImageUrl" ng-src="{{$select.selected.ImageUrl}}" />{{$select.selected.Name}}</div>',selectOptionTemplate:'<div class="select-text-option"><img class="img-responsive img-circle" ng-src="{{::option.ImageUrl}}" ng-if="::option.ImageUrl" /><div ng-bind-html="option.Name | highlight: $select.search"></div><small class="text-muted" ng-show="::option.Description">{{::option.Description}}</small></div>'};return{restrict:"A",scope:!0,template:function(n,l){var a=n.closest("[form-for]"),o=n.closest("[sub-form-for]"),s=(o.length?o:a).attr("schema"),d=t[s],c=d&&d.$schema,p=c&&c[l.fieldFor],u=o.attr("sub-form-for")||"";if(p){var m=e.extend({display:l.fieldFor,inputType:"text",tabIndex:l.tabIndex},i,p,p.input,l),f=(l.display||l.fieldFor,l.fieldFor),g=l.openName||l.fieldFor,b=l.selectFrom,h=l.selectFilter,v='<div class="form-group" ng-click="groupClicked(\'input\')" style="position:relative"><label class="control-label" for="'+u+f+'Input">'+m.display+"</label><div ng-if=\"formFor.mode === 'VIEW'\">";return b?v+='<ui-select tabindex = "'+m.tabIndex+'" ng-model="formFor.target.'+(u?u+".":"")+f+'" name="'+u+f+'Input" theme="'+m.selectTheme+'" ng-disabled="true" ng-required="'+m.required+'"><ui-select-match allow-clear="true" placeholder="'+(m.placeholder||"Select..")+'">'+m.selectSelectedTemplate+'</ui-select-match><ui-select-choices repeat="option.Id as option in '+b+' | filter: $select.search">'+m.selectOptionTemplate+"</ui-select-choices></ui-select>":m.currency?v+='<p class="form-control-static"  ng-bind="formFor.target.'+(u?u+".":"")+(m.displayField||f)+'| Convert | Format "></p>':m.prepend?v+='<p class="form-control-static">'+(m.prepend.text||"")+"{{formFor.target."+(u?u+".":"")+(m.displayField||f)+(m.displayFilters||"")+"}}</p>":m.nullDisplay?v+='<p class="form-control-static"  ng-bind="(formFor.target.'+(u?u+".":"")+(m.displayField||f)+") ? (formFor.target."+(u?u+".":"")+(m.displayField||f)+(m.displayFilters||"")+") : ('"+m.nullDisplay+"')\"></p>":"password"==m.inputType?v+='<p class="form-control-static"><small class="text-muted">&lt;Hidden&gt;</small></p>':"Phone"==m.type?(v+="<a href=\"{{'tel:'+formFor.target."+(u?u+".":"")+(m.displayField||f)+'}}" ng-if="formFor.target.'+(u?u+".":"")+(m.displayField||f)+'" class="form-control-static" ng-bind="formFor.target.'+(u?u+".":"")+(m.displayField||f)+(m.displayFilters||"")+'"></a>',v+='<small class="text-muted" ng-if="!formFor.target.'+(u?u+".":"")+(m.displayField||f)+" && "+!m.emptyval+'" class="form-control-static">-</small>'):m.type===Boolean?(v+='<div class="">',v+=r("input",{"class":"check",type:"checkbox",tabindex:m.tabIndex?m.tabIndex:"",name:u+f+"Check",id:u+f+"Check",ngModel:"formFor.target."+(u?u+".":"")+f,ngRequired:m.required,ngDisabled:!0})+'<label class="check-label" for="'+u+f+'Check"></label></div><br class="clearfix" />'):(v+='<p ng-if="formFor.target.'+(u?u+".":"")+(m.displayField||f)+'" class="form-control-static"  ng-bind="formFor.target.'+(u?u+".":"")+(m.displayField||f)+(m.displayFilters||"")+'"></p>',v+='<small class="text-muted" ng-if="!formFor.target.'+(u?u+".":"")+(m.displayField||f)+" && "+!m.emptyval+'" class="form-control-static">-</small>',v+='<small class="text-muted" ng-if="!formFor.target.'+(u?u+".":"")+(m.displayField||f)+" && "+!!m.emptyval+'" class="form-control-static">'+m.emptyval+"</small>"),v+="</div><div class=\"form-edit\" ng-if=\"formFor.mode === 'EDIT' || formFor.mode === 'CREATE'\">",m.textarea?v+=r("textarea",{"class":"form-control",rows:m.textarea,name:u+f+"Input",tabindex:m.tabIndex?m.tabIndex:"",ngModel:"formFor.target."+(u?u+".":"")+f,ngRequired:m.required,ngDisabled:e.isDefined(m.editable)&&(!m.editable||"false"==m.editable),style:"height:initial;"}):m["enum"]?(v+='<select tabindex="'+(m.tabIndex||"")+'" class="form-control" ng-model="formFor.target.'+(u?u+".":"")+f+'" name="'+u+f+'Input" ng-disabled="'+(e.isDefined(m.editable)&&!m.editable)+'" ng-required="'+m.required+'">',"string"==typeof m["enum"][0]?e.forEach(m["enum"],function(e){v+='<option value="'+e+'">'+e+"</option>"}):e.forEach(m["enum"],function(e){v+='<option value="'+e.value+'">'+e.display+"</option>"}),v+="</select>"):b?(v+='<ui-select tabindex = "'+m.tabIndex+'" class="edit" ng-model="formFor.target.'+(u?u+".":"")+f+'" name="'+u+f+'Input" theme="'+m.selectTheme+'" ng-disabled="'+(e.isDefined(m.editable)&&(!m.editable||"false"==m.editable)||m.ngDisabled||!1)+'" ng-required="'+m.required+'"><ui-select-match allow-clear="true" placeholder="'+(m.placeholder||"Select..")+'">'+m.selectSelectedTemplate+'</ui-select-match><ui-select-choices repeat="option.Id as option in '+b+(h?" | filter:"+h:"")+' | filter: $select.search">'+m.selectOptionTemplate+"</ui-select-choices></ui-select>",m.required||e.isDefined(m.editable)&&(!m.editable||"false"==m.editable)||(v+='<a ng-click="formFor.target.'+(u?u+".":"")+f+' = null;" style="position:absolute;right:0px;top:2px;font-size:11px;" ng-show="formFor.target.'+(u?u+".":"")+f+" && !"+(m.ngDisabled||"false")+'" class="red">Clear</a>')):m.type===moment&&"time"!=m.inputType?v+='<div class="input-group">'+r("input",{"class":"form-control",type:"text",name:u+f+"Input",ngModel:"formFor.target."+(u?u+".":"")+f,ngModelOptions:"{ 'timezone':'+0000' }",ngRequired:m.required,datepickerPopup:"shortDate",tabindex:m.tabIndex?m.tabIndex:"",isOpen:"formFor.opened."+u+g+"Input",placeholder:"{{DATETIME_FORMAT}}",ngDisabled:e.isDefined(m.editable)&&(!m.editable||"false"==m.editable),showWeeks:!1,showButtonBar:!1})+'<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openCalendar($event, \''+u+g+'Input\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div>':"Phone"==m.type?v+='<input class="form-control" tabindex="'+m.tabIndex+'"  type="text" international-phone-number name="'+(u?u:"")+f+'Input" ng-model-options="{allowInvalid:true}" ng-model="formFor.target.'+(u?u+".":"")+f+'" ng-required="'+m.required+'" ng-disabled="'+(e.isDefined(m.editable)&&!m.editable)+'"/></div>':m.type==Number?(v+='<input class="form-control" tabindex="'+m.tabIndex+'" type="number" name='+(u?u:"")+f+"Input ng-model=formFor.target."+(u?u+".":"")+f+" ng-required="+m.required+" ng-disabled="+(e.isDefined(m.editable)&&(!m.editable||"false"==m.editable)),e.isDefined(m.min)&&(v+=" min="+m.min),e.isDefined(m.max)&&(v+=" max="+m.max),v+=" /></div>"):"time"==m.inputType?v+='<div class="input-group" dropdown is-open="formFor.opened.'+u+f+'Input" auto-close="outsideClick">'+r("input",{"class":"form-control",type:"time",name:u+f+"Input",ngModel:"formFor.target."+(u?u+".":"")+f,ngModelOptions:m.timezone?"{ 'timezone':'+0000' }":null,tabindex:m.tabIndex?m.tabIndex:"",ngRequired:m.required,placeholder:"HH:MM",ngDisabled:e.isDefined(m.editable)&&(!m.editable||"false"==m.editable)})+'<ul class="dropdown-menu timepicker"><li><timepicker ng-model="formFor.target.'+(u?u+".":"")+f+'" '+(m.timezone?"ng-model-options=\"{ 'timezone':'+0000' }\"":"")+' hour-step="1" minute-step="5" show-meridian="false"></timepicker></li></ul><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openCalendar($event, \''+u+f+'Input\')"><i class="glyphicon glyphicon-time"></i></button></span></div>':m.type===Boolean?(v+='<div class="">',v+=r("input",{"class":"check",type:"checkbox",name:u+f+"Check",id:u+f+"Check",tabindex:m.tabIndex?m.tabIndex:"",ngModel:"formFor.target."+(u?u+".":"")+f,ngRequired:m.required,ngDisabled:e.isDefined(m.editable)&&(!m.editable||"false"==m.editable)})+'<label class="check-label" for="'+u+f+'Check"></label></div><br class="clearfix" />'):((m.append||m.prepend)&&(v+='<div class="input-group">'),m.prepend&&(v+='<span class="input-group-btn"><button type="button" class="btn btn-default currency" ng-style="{ \'background-color\': (type == \'currency\') ? \'#2AA2AB\' : \'#eee\' }" ng-click="'+m.prepend.click+'"><i class="'+m.prepend.icon+'"></i>'+m.prepend.text+"</button></span>"),v+=m.modelFilter?r("input",{"class":"form-control",type:m.inputType,name:u+f+"Input",tabindex:m.tabIndex?m.tabIndex:"",step:m.step,ngModel:"formFor.target."+(u?u+".":"")+f,ngDisabled:e.isDefined(m.editable)&&(!m.editable||"false"==m.editable),ngRequired:m.required,placeholder:m.placeholder,modelFilter:""}):r("input",{"class":"form-control",type:m.inputType,tabindex:m.tabIndex?m.tabIndex:"",name:u+f+"Input",step:m.step,min:m.min,max:m.max,ngModel:"formFor.target."+(u?u+".":"")+f,ngDisabled:e.isDefined(m.editable)&&(!m.editable||"false"==m.editable),ngRequired:m.required,placeholder:m.placeholder}),m.append&&(v+='<span class="input-group-btn"><button type="button" class="btn btn-default" ng-style="{ \'background-color\': (type == \'percent\') ? \'#2AA2AB\' : \'#eee\' }" ng-click="'+m.append.click+'"><i class="'+m.append.icon+'"></i>'+m.append.text+"</button></span>"),(m.append||m.prepend)&&(v+="</div>")),m.helpText&&(v+='<small class="help-block text-muted">'+m.helpText+"</small>"),v+='<div ng-messages="formFor.form.'+u+f+'Input.$error" class="help-block"><div ng-message="required">'+m.display+' is required.</div><div ng-message="parse">'+m.display+' is incorrectly formatted.</div><div ng-message="email">'+m.display+' is not a valid e-mail.</div><div ng-message="min">'+m.display+" has minimum value "+m.min+'</div><div ng-message="internationalPhoneNumber">'+m.display+" is not a valid phone number.</div></div></div>",v+="</div>"}},link:function(e,t,i){e.openCalendar=function(t,n){e.formFor.opened[n]=!0,t.preventDefault(),t.stopPropagation()},e.current=n.currency().getCurrent(),e.type="",e.$watch("type",function(t,n){t!=n&&e.$apply()})}}}function i(){return function(t,n){var i=[];return e.isArray(t)?t.forEach(function(e){for(var t=!1,r=Object.keys(n),l=0;l<r.length;l++){var a=r[l],o=n[a].toLowerCase();if(e[a]&&e[a].toString().toLowerCase().indexOf(o)!==-1){t=!0;break}}t&&i.push(e)}):i=t,i}}function r(t,n){var i="<"+t+" ";return e.forEach(n,function(t,n){e.isDefined(t)&&null!==t&&(i+=l(n)+'="'+t+'"')}),i+="input"===t?" />":" ></"+t+">"}function l(e){for(var t="",n=0;n<e.length;n++){var i=e[n];t+=i==i.toUpperCase()?"-"+i.toLowerCase():i}return t}function a(e,t){return{require:"ngModel",link:function(n,i,r,l){n.$watch(function(){return n.current=e.currency().getCurrent(),n.current},function(e,n){var i=t("Convert")(l.$modelValue);l.$setViewValue(i),l.$render()},!1)}}}function o(){return{require:"ngModel",link:function(e,t,n,i){i.$parsers.push(function(e){return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().substring(0,10)}),i.$formatters.push(function(e){if(e){var t=new Date(e);return t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),t.toISOString().substring(0,10)}})}}}function s(e){return{require:"ngModel",link:function(t,n,i,r){var l=t.$eval(i.ngModel);if(void 0!==l){var a=new Date(l);a.setMinutes(a.getMinutes()+a.getTimezoneOffset());var o=e(i.ngModel);o.assign(t,a)}}}}var d=e.module("framework.directives.UI");d.directive("fieldFor",n),d.directive("formFor",t),d.directive("modelFilter",a),d.directive("dtPicker",o),d.directive("timePicker",s),d.filter("propSearch",i),t.$inject=["Model"],n.$inject=["Model","Localisation"],a.$inject=["Localisation","$filter"],s.$inject=["$parse"]}(angular);;;;
!function(t){function a(t,a,n){return{restrict:"A",template:'<ul class="rating"><li ng-repeat="star in stars" ng-class="star" ng-click="toggle($index)"></li></ul>',scope:{ratingValue:"=",max:"=",onRatingSelected:"&"},link:function(t,a,n){var e=function(){t.stars=[];for(var a=0;a<t.max;a++)t.stars.push({filled:a<t.ratingValue})};t.toggle=function(a){t.ratingValue=a+1,t.onRatingSelected({rating:a+1})},t.$watch("ratingValue",function(t,a){a&&e()})}}}var n=t.module("framework.directives.UI");n.directive("starRating",a),a.$inject=["$state","$interval","$parse"]}(angular);;;;
!function(e){"use strict";e.module("framework.directives.UI").constant("ipnConfig",{allowExtensions:!1,autoFormat:!0,autoHideDialCode:!0,autoPlaceholder:!0,customPlaceholder:null,defaultCountry:"",geoIpLookup:null,nationalMode:!0,numberType:"MOBILE",onlyCountries:void 0,preferredCountries:["gb"],skipUtilScriptDownload:!1,utilsScript:""}).directive("internationalPhoneNumber",["$timeout","ipnConfig",function(n,t){return{restrict:"A",require:"^ngModel",scope:{ngModel:"=",country:"="},link:function(r,o,u,i){var l,a,c,s;return i&&""!==o.val()&&n(function(){return o.intlTelInput("setNumber",o.val()),i.$setViewValue(o.val())},0),c=function(){o.val()?i.$setViewValue(o.val()):(i.$setViewValue("0"),n(function(){return i.$setViewValue("")},0)),console.log(o.val()+"-"+i.$modelValue)},l=function(e){return e instanceof Array?e:e.toString().replace(/[ ]/g,"").split(",")},a=e.copy(t),e.forEach(a,function(n,t){var r;if(u.hasOwnProperty(t)&&e.isDefined(u[t]))return r=u[t],"preferredCountries"===t?a.preferredCountries=l(r):"onlyCountries"===t?a.onlyCountries=l(r):"boolean"==typeof n?a[t]="true"===r:a[t]=r}),s=r.$watch("ngModel",function(e){return r.$$postDigest(function(){return null!==e&&void 0!==e&&e.length>0&&("+"!==e[0]&&(e="+"+e),i.$modelValue=e),o.intlTelInput(a),!a.skipUtilScriptDownload&&void 0===u.skipUtilScriptDownload&&!a.utilsScript,s()})}),r.$watch("country",function(e){if(null!==e&&void 0!==e&&""!==e)return o.intlTelInput("selectCountry",e)}),i.$formatters.push(function(e){return e?(setTimeout(function(){o.intlTelInput("setNumber",e)},0),e):e}),i.$parsers.push(function(e){return e=o.intlTelInput("getNumber")}),i.$validators.internationalPhoneNumber=function(e){if(!e)return!0;var n;return n=o.intlTelInput("getSelectedCountryData"),!(e&&(!n||n.dialCode!==e))||o.intlTelInput("isValidNumber")},o.on("blur keyup change",function(e){return r.$apply(c)}),o.on("$destroy",function(){return o.intlTelInput("destroy"),o.off("blur keyup change")})}}}])}(angular);;;;
!function(e){function r(e,r,t){return{restrict:"E",transclude:!0,replace:!0,scope:!0,template:function(e,r){var t="";if(t+='<div class="score"',r.size){var i=parseInt(r.size);t+=' style="position:relative;width:'+i+"px; height: "+i+"px; border-radius:"+i/2+'px;padding:5px;">'}else t+=' style="width:100px;height:100px;border-radius:50px;">';return r.showScore&&(t+='<div class="score-value" style="line-height:'+i+'px">'+r.showScore+"</div>"),t+='<svg class="dial" viewBox="0 0 100 100"><circle class="score-back-circle" cx="50" cy="50" r="45" fill="transparent" stroke-linecap="round"></circle><circle class="score-front-circle" cx="50" cy="50" r="45" fill="transparent" stroke-linecap="round"></circle></svg>',t+="</div>"},link:function(e,r,t,i,c){if(t.value){var s=t.strokeWidth?t.strokeWidth:5,a=2*Math.PI*50/100*t.value,l=a<90?"red":a>=90&&a<180?"orange":"#2AA2AB";r.find("circle.score-back-circle").attr("stroke","#eee").attr("stroke-width",s),r.find("circle.score-front-circle").attr("stroke",l).attr("stroke-width",s).attr("stroke-dasharray",a+",10000")}}}}var t=e.module("framework.directives.UI");t.directive("score",r),r.$inject=["$state","$interval","$parse"]}(angular);;;;
!function(e){function t(e,t,s,d,n){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"/e9_components/directives/autocomplete-template.html",link:function(e,t,d,n,a){e.suggestions=[],e.selectedTags=[],e.searchText="",e.mode=d.displaymode,e.selectedTags=s(d.model)(e),d.$observe("displaymode",function(t){e.mode=t}),e.$watch(function(){return s(d.model)(e)},function(t){e.selectedTags=t});var c=s(d.tagsdata),l=s(d.model);e.data=c(e).filter(function(t){var s=0;for(i=0;i<e.selectedTags.length;i++)t.Id==e.selectedTags[i].Id&&(s=1);if(0==s)return t}),e.selectedIndex=-1,e.removeTag=function(t){e.selectedIndex=-1;var s=e.selectedTags.splice(t,1);e.data.splice(t,0,s[0]),e.searchText="",l.assign(e,e.selectedTags)},e.search=function(){e.suggestions=e.data.filter(function(t){return t.Name.toLowerCase().indexOf(e.searchText.toLowerCase())!=-1}),e.selectedIndex=-1},e.addToSelectedTags=function(t){if((!e.selectedTags||e.selectedTags.indexOf(e.suggestions[t])===-1)&&e.data.indexOf(e.suggestions[t])>-1){e.selectedTags.push(e.suggestions[t]),l.assign(e,e.selectedTags);var t=e.data.indexOf(e.suggestions[t]);e.data.splice(t,1),e.searchText="",e.suggestions=e.data,e.selectedIndex=-1}else console.log("Already added"),e.selectedIndex=-1},e.checkKeyDown=function(t){40===t.keyCode?(t.preventDefault(),e.selectedIndex+1!==e.suggestions.length&&e.selectedIndex++):38===t.keyCode?(t.preventDefault(),e.selectedIndex-1!==-1&&e.selectedIndex--):13===t.keyCode&&(t.preventDefault(),e.addToSelectedTags(e.selectedIndex))},e.$watch("selectedIndex",function(e){})}}}var s=e.module("framework.directives.UI");s.directive("tagsinput",t),t.$inject=["$state","$interval","$parse","$http","$config"]}(angular);;;;
!function(n){function r(){return function(n){if(n){var r=n/60,t=Math.floor(r),e=60*(r-t),o=Math.round(e);return t+"h:"+o+"m"}return"00:00"}}function t(){return function(n){return n.substring(0,5)}}function e(){return function(n){return n.replace(/\s/g,"")}}function o(){return function(n,r,t){return isNaN(r)&&(r=10),void 0===t&&(t="..."),n&&(n.length<=r||n.length-t.length<=r)?n:String(n).substring(0,r-t.length)+t}}function u(){return function(n,r){if(n.length<=r)return n;separator="...";var t=separator.length,e=r-t,o=Math.ceil(e/2),u=Math.floor(e/2);return n.substr(0,o)+separator+n.substr(n.length-u)}}function i(){return function(n){return Math.abs(Number(n))>=1e9?Math.round(10*Math.abs(Number(n)/1e9))/10+"b":Math.abs(Number(n))>=1e6?Math.round(10*Math.abs(Number(n)/1e6))/10+"m":Math.abs(Number(n))>=1e3?Math.round(10*Math.abs(Number(n)/1e3))/10+"k":Math.abs(Number(n))}}function a(){return function(n){var r,t=function(n,r,t){var e=$.isFunction(n)?n(r,a):n,o=t.numbers&&t.numbers[r]||r;return e.replace(/%d/i,o)},e=(new Date).getTime(),o=new Date(n).getTime(),u=!0,i={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"",seconds:"few seconds",minute:"a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years"},a=e-o,f=Math.abs(a)/1e3,s=f/60,c=s/60,m=c/24,l=m/365,h=void 0===i.wordSeparator?" ":i.wordSeparator,d=i.prefixAgo,b=i.suffixAgo;return u&&a<0&&(d=i.prefixFromNow,b=i.suffixFromNow),r=f<45&&t(i.seconds,Math.round(f),i)||f<90&&t(i.minute,1,i)||s<45&&t(i.minutes,Math.round(s),i)||s<90&&t(i.hour,1,i)||c<24&&t(i.hours,Math.round(c),i)||c<42&&t(i.day,1,i)||m<30&&t(i.days,Math.round(m),i)||m<45&&t(i.month,1,i)||m<365&&t(i.months,Math.round(m/30),i)||l<1.5&&t(i.year,1,i)||t(i.years,Math.round(l),i),$.trim([d,r,b].join(h))}}function f(n){return function(r,t,e){return null==r?null:0==r?0:n.currency().convert(r,t,e)}}function s(n,r){return function(t,e){var o=null;return o=e?n.currency().getById(e):n.currency().getCurrent(),o?t?o.Prepend+r("number")(t,2):o.Prepend+"0.00":r("currency")(t)}}function c(n){return function(r){var t=n.timeZone().timeZoneDateTime(r);return t}}function m(n){return function(r,t,e){var o=new moment(n.timeZone().timeZoneDateTime(r));return e&&(o=o.tz(e)),o.format(t)}}function l(){return function(n,r){return n?"http"===n.slice(0,4)?n:"api/"===n.slice(0,4)?window.endpoint+n:window.resourceEndpoint+n:window.endpoint+"api/imagegen?text="+r}}var h=n.module("framework.filters.utility",[]);h.filter("RemoveSpaces",e),h.filter("Truncate",o),h.filter("Mtruncate",u),h.filter("AbbrValue",i),h.filter("Countdown",a),h.filter("Convert",f),h.filter("Format",s),h.filter("TZConvert",c),h.filter("companyDate",m),h.filter("formatImage",l),h.filter("time",t),h.filter("minsToHr",r),f.$inject=["Localisation"],s.$inject=["Localisation","$filter"],c.$inject=["Localisation"],m.$inject=["Localisation"]}(angular);;;;
!function(o,n){function t(n,t,e,a,l){if(!o.CAB9Instance){var r=new CAB9;r.init(),o.CAB9Instance=r}n.showAlert=function(){e.open({templateUrl:"/webapp/common/modals/alert/modal.html",windowClass:"christmas",size:"lg"})},n.logout=function(){a.$broadcast(l.LOGOUT)}}var e=n.module("framework.UI.structure",[]);e.controller("PageController",t),t.$inject=["$scope","$interval","$modal","$rootScope","AUTH_EVENTS"]}(window,angular);;;;
!function(e,r){function t(e,r,t,a,o,n){function l(){e.helpAvailable&&t.open({templateUrl:e.helpAvailable})}function i(r){for(var t=r.split("."),a=[],o=0;o<t.length;o++){var n=t[o];if("root"!==n&&("viewer"!==n||p)){var l=t.slice(0,o+1).join(".");a.push({name:t[o],$html:s(n,l)})}}e.breadcrumbs=a}function s(e,t){"viewer"==e&&(e=p,t+=".dashboard");var a=r.get(t),o='<a ui-sref="'+(a["default"]||t)+'" ui-sref-opts="{reload: true}" >'+e+"</a>";return o}function m(e,r){if(e.viewerType){var t=n[e.viewerType];if(t){var a=t.filter(function(e){return e.Id===r.Id})[0];if(a)return a.Name}}return null}e.breadcrumbs=[],e.helpAvailable=null,e.showHelp=l,a.reportFilters.format=e.DATETIME_FORMAT.replace(/[.|/|-][y|Y][y|Y]*/g,""),e.selectedPeriod="This Week",$("#daterangepicker").daterangepicker({autoApply:!0,startDate:moment().startOf("isoweek"),endDate:moment().endOf("isoweek"),opens:"right",ranges:{Today:[moment().startOf("day"),moment().endOf("day")],"This Week":[moment().startOf("isoweek"),moment().endOf("isoweek")],"This Month":[moment().startOf("month"),moment().endOf("month")]},alwaysShowCalendars:!0}),$("#daterangepicker").on("apply.daterangepicker",function(r,t){e.selectedPeriod=t.chosenLabel,a.reportFilters.from=t.startDate.toISOString(),a.reportFilters.to=t.endDate.toISOString(),e.$apply()});var p=null;e.showTimeControl=r.current.showTimeControl,a.$on("$stateChangeSuccess",function(r,t,a,o,n){p=m(t,a),i(t.name),e.helpAvailable=t.hasHelp,e.showTimeControl=t.showTimeControl}),e.helpAvailable=r.current.hasHelp,p=m(r.current,r.params),i(r.current.name)}var a=r.module("framework.UI.breadcrumb",[]);a.controller("BarController",t),t.$inject=["$scope","$state","$modal","$rootScope","$timeout","ViewerCache"]}(window,angular);;;;
!function(n,e){function o(n){function o(e){n.panel.currentConfig=n.panel.configs[e],n.panel.mode=e,n.panel.onPanelResize()}var l={L:{"class":"left-bar",width:"480px",height:null},B:{"class":"bottom-bar",width:null,height:"480px"}};n.panel={onPanelResize:e.noop,mode:"L",configs:l,currentConfig:l.L,switchConfig:o}}var l=e.module("framework.UI.structure");l.controller("ThreePanelController",o),o.$inject=["$scope"]}(window,angular);;;;
!function(r){function e(r,e,o,s,t,u,n,a){function l(){r.showScore=!r.showScore}function p(){var e={"true":[],"false":[]};r.groups["true"]&&r.groups["true"].length>0&&(e["true"]=r.groups["true"]),r.groups["false"]&&r.groups["false"].length>0&&(e["false"]=r.groups["false"]),r.groups=e}r.rawItems=e,r.filteredItems=[],r.accessors=s,r.rNavTo=o,r.toggleScore=l,r.choosen={group:null},r.cardLimit=2,r.showScore=!1,r.groups={},e=e.sort(function(r,e){var o=s.Title(r),t=s.Title(e);return o<t?-1:o>t?1:0});var c,g=0;for(c=0;c<e.length;c++){var f=s.Group(e[c]);r.groups[f]?r.groups[f].push(e[c]):(r.groups[f]=[e[c]],g++)}(r.groups.hasOwnProperty("true")||r.groups.hasOwnProperty("false"))&&(p(),r.choosen.group="true"),r.selectGroups=g>5,e.pullMore&&e.pullMore.execute().then(function(e){r.rawItems=e,r.groups={},e=e.sort(function(r,e){var o=s.Title(r),t=s.Title(e);return o<t?-1:o>t?1:0});var o,t=0;for(o=0;o<e.length;o++){var u=s.Group(e[o]);r.groups[u]?r.groups[u].push(e[o]):(r.groups[u]=[e[o]],t++)}(r.groups.hasOwnProperty("true")||r.groups.hasOwnProperty("false"))&&p(),r.selectGroups=t>5}),n(function(){r.showSearch=!0,setTimeout(function(){$("#searchTerm").focus()},500)},500),r.$watchGroup(["searchTerm.$","choosen.group","rawItems.length"],function(){var e=a("filter")(r.rawItems,r.searchTerm);r.choosen.group?r.filteredItems=e.filter(function(e){return s.Group(e)==r.choosen.group}):r.filteredItems=e})}var o=r.module("framework.UI.module",[]);o.controller("ModuleCardsController",e),e.$inject=["$scope","rData","rNavTo","rAccessors","$state","$interval","$timeout","$filter"]}(angular);;;;
!function(r){function e(r,e,o,s,t,u,n,a,p){function l(){r.showScore=!r.showScore}function c(){var e={"true":[],"false":[]};r.groups["true"]&&r.groups["true"].length>0&&(e["true"]=r.groups["true"]),r.groups["false"]&&r.groups["false"].length>0&&(e["false"]=r.groups["false"]),r.groups=e}if(r.rawItems=e,r.filteredItems=[],r.accessors=s,r.rNavTo=o,r.rId=a,r.toggleScore=l,r.choosen={group:null},r.cardLimit=2,r.showScore=!1,r.groups={},e=e.sort(function(r,e){var o=s.Title(r),t=s.Title(e);return o<t?-1:o>t?1:0}),s.Group){var g,f=0;for(g=0;g<e.length;g++){var i=s.Group(e[g]);r.groups[i]?r.groups[i].push(e[g]):(r.groups[i]=[e[g]],f++)}(r.groups.hasOwnProperty("true")||r.groups.hasOwnProperty("false"))&&(c(),r.choosen.group="true"),r.selectGroups=f>5}e.pullMore&&e.pullMore.execute().then(function(e){if(r.rawItems=e,r.groups={},e=e.sort(function(r,e){var o=s.Title(r),t=s.Title(e);return o<t?-1:o>t?1:0}),s.Group){var o,t=0;for(o=0;o<e.length;o++){var u=s.Group(e[o]);r.groups[u]?r.groups[u].push(e[o]):(r.groups[u]=[e[o]],t++)}(r.groups.hasOwnProperty("true")||r.groups.hasOwnProperty("false"))&&c(),r.selectGroups=t>5}}),n(function(){r.showSearch=!0,setTimeout(function(){$("#searchTerm").focus()},500)},500),r.$watchGroup(["searchTerm.$","choosen.group","rawItems.length"],function(){var e=p("filter")(r.rawItems,r.searchTerm);r.choosen.group?r.filteredItems=e.filter(function(e){return s.Group(e)==r.choosen.group}):r.filteredItems=e})}var o=r.module("framework.UI.module");o.controller("ModuleSecondaryCardsController",e),e.$inject=["$scope","rData","rNavTo","rAccessors","$state","$interval","$timeout","rId","$filter"]}(angular);;;;
!function(e){function t(e,t,n,r,a,o,l){function c(e){o.go(n,{Id:e.Id})}e.items=t;var s=o.$current.name.substring(5).split(".");s.length>0&&"table"==s[1]&&(e.state=s[0]+".viewer"),t.pullMore&&t.pullMore.execute().then(function(t){e.items=t}),e.viewItem=c,e.Schema=r,e.customColumns=a}function n(t,n,r,a,o,l,c,s,u){function i(e){var t={};t[u]=e.Id,c.go(r,t)}n.clone();t.viewItem=i,t.Schema=a,t.customColumns=l,t.rId=u,t.items=n,t.serverSearchTerm&&e.isFunction(o)&&t.$watch("serverSearchTerm.$",function(e,r){e?t.items=o(n.clone(),{$:e}):e!=r&&(t.items=n.clone()),t.items.clone({filters:!0}).select("Id").raw().execute().then(function(e){t.paging.totalItems=e.length,t.paging.maxPages=Math.ceil(e.length/t.paging.maxPerPage)})}),t.fetchStatus="Fetching",t.paging={currentPage:1,maxPerPage:50,totalItems:null,maxPages:null},t.state=r}var r=e.module("framework.UI.module");r.controller("ModuleTableController",t),r.controller("ModulePagedTableController",n),t.$inject=["$scope","rData","rNavTo","rSchema","rColumns","$state","$q"],n.$inject=["$scope","rQuery","rNavTo","rSchema","rServerSearch","rColumns","$state","$q","rId"]}(angular);;;;
!function(e){function a(e,a,s,t,o){if(e.item=s[0],e.accessors=t,e.tabDefs=[],a.length>4){for(var r=0;r<3;r++)e.tabDefs.push(a[r]);setTimeout(function(){$(".module-item .module-item-nav-bar .tab-container ul.nav-tabs").append('<li class="has-dropdown"><a><span id="selected">More</span><i class="material-icons">arrow_drop_down</i></a><ul class="subnav"></ul></li>');for(var s=3;s<a.length;s++){var t=Object.keys(a[s].params)[0];$(".subnav").append(o('<li><a ui-sref="'+a[s].route+"({"+t+":'"+a[s].params[t]+"'})\">"+a[s].heading+"</a></li>")(e))}$(".subnav a").click(function(){$("#selected").text($(this).text())})},0)}else e.tabDefs=a}var s=e.module("framework.UI.module");s.controller("ModuleItemViewController",a),a.$inject=["$scope","rTabs","rData","rAccessors","$compile"]}(angular);;;;
!function(e,t){function n(t,n,o,c,u,r,i,l){function m(e){e||(t.activeDocuments=n.filter(function(e){return e.Active}),t.inActiveDocuments=n.filter(function(e){return!e.Active})),setTimeout(function(){p=new Packery(v,{itemSelector:".active-docs",percentPosition:!0,gutter:0}),D=new Packery(y,{itemSelector:".inactive-docs",percentPosition:!0,gutter:0})},1e3)}function s(e){var t=u.open({templateUrl:"/e9_components/layouts/module/module-document-item.modal.html",controller:"ModuleDocumentItemEditController",resolve:{rDocument:function(){return e},rDocumentTypes:function(){return r.docTypes?r.docTypes:o.DocumentType.query().execute()}}});t.result.then(function(e){swal("Document Updated!","Document has been Updated.","success")},function(){})}function d(n){e.open(t.RESOURCE_ENDPOINT+n.FilePath,"_blank")}function a(){var e=u.open({templateUrl:"/e9_components/layouts/module/module-document-item.modal.html",controller:"ModuleDocumentItemNewController",resolve:{rData:function(){return{OwnerType:r.type,OwnerId:r.id}},rDocumentTypes:function(){return r.docTypes?r.docTypes:o.DocumentType.query().execute()}}});e.result.then(function(e){swal({title:"Document Added!",text:"Document has been Added.",type:"success"},function(){}),n.push(e),m()},function(){})}function f(e){swal({title:"Are you sure?",text:"You will not be able to recover the document!",type:"warning",showCancelButton:!0,confirmButtonColor:i.COLOURS.brandPrimary,confirmButtonText:"Confirm Delete!",closeOnConfirm:!0},function(){c["delete"](e.Id).then(function(){swal("Deleted!","Document has been deleted.","success");var t=n.indexOf(e);n.splice(t,1),m()},function(){swal("Error!","Some Issue while deleting.","error")})})}t.openModalWithDocument=s,t.openNewDocumentModal=a,t.deleteDocument=f,t.previewDocument=d,t.state=l.$current.name.substring(5),t.onlyActive=r.onlyActive,t.activeDocuments=n.filter(function(e){return e.Active}),t.inActiveDocuments=n.filter(function(e){return!e.Active}),t.getImagePath=function(t){return"api"==t.substring(0,3)?e.endpoint+t:e.resourceEndpoint+t};var p=null,D=null,v=document.querySelector(".active-grid"),y=document.querySelector(".inactive-grid");setTimeout(function(){m(!0)},1e3)}var o=t.module("framework.module.documents",["framework.services.documents"]);o.controller("ModuleDocumentsController",n),n.$inject=["$scope","rDocuments","Model","FileUpload","$modal","rConfig","$UI","$state"]}(window,angular);;;;
!function(e){function n(e,n,o,t,c,r){function u(){e.progress=0,this.document.file?c.update(this.document.file,this.document).then(function(e){r.close(e),swal("Document Updated!","Document has been Updated.","success"),n.go(n.current,{},{reload:!0})},function(n){swal({title:"An Error Occured!",text:"Document has not been Uploaded.",type:"error"}),e.progress=null},function(n){e.progress=n}):this.document.$patch().then(function(e){r.close(e.data),swal("Document Updated!","Document Info has been Updated.","success"),n.go(n.current,{},{reload:!0})},function(n){swal({title:"An Error Occured!",text:"Document has not been Uploaded.",type:"error"}),e.progress=null},function(n){e.progress=n})}e.document=o,e.documentTypes=t,e.progress=null,e.document.file=null,e.viewMode="EDIT",e.saveDocument=u}function o(e,n,o,t,c,r){function u(){e.progress=0,c.upload(this.document.file,this.document).then(function(o){o=new n.Document(o),o.DocumentType=e.documentTypes.filter(function(e){return e.Id==o.DocumentTypeId})[0],r.close(o)},function(n){swal({title:"An Error Occured!",text:"Document has not been Uploaded.",type:"error"}),e.progress=null},function(n){e.progress=n})}e.document={},e.documentTypes=t,e.document.file=null,e.document.Active=!0,e.document.OwnerType=o.OwnerType,e.document.OwnerId=o.OwnerId,e.viewMode="CREATE",e.progress=null,e.saveDocument=u}var t=e.module("framework.UI.module");t.controller("ModuleDocumentItemEditController",n),t.controller("ModuleDocumentItemNewController",o),n.$inject=["$scope","$state","rDocument","rDocumentTypes","FileUpload","$modalInstance"],o.$inject=["$scope","Model","rData","rDocumentTypes","FileUpload","$modalInstance"]}(angular);;;;
!function(e){function t(t,n,i,l,a,o,r){function s(s,c,u,d,g){function f(){Y&&(o.cancel(Y),Y=null),Y=o(p,500)}function p(){for(var e in s.$data)delete s.$data[e];s.$data.$loading=!0,s.$data.$error=null,s.$datasource(s.$filtering,s.$sorting,s.$grouping,s.$paging,s.$data).then(m,$,h)}function m(t){for(var n in s.$data)delete s.$data[n];s.$data.$loading=!1,e.extend(s.$data,t)}function $(e){for(var t in s.$data)delete s.$data[t];s.$data.$loading=!1,s.$data.$error=e}function h(e){s.$paging.totalItems=e}function b(t,n,i){s.$datasource(s.$filtering,s.$sorting,s.$grouping,{currentPage:1,maxPerPage:null},[]).then(function(t){var l=[];e.forEach(t,function(e){[].push.apply(l,e)});var o=[];if(i)var l=l.filter(function(e){return H.indexOf(e.Id)>-1});e.forEach(l,function(t){var n={};e.forEach(s.$columns,function(e){e.visible&&(n[e.title]=e.accessor(t))}),o.push(n)});var c="data";if("csv"==n)r.download(o,c);else if("json"==n){var u=a("json")(o,!0),d=document.createElement("a");d.href="data:application/json,"+encodeURIComponent(u),d.target="_blank",d.download=c+".json",d.style.display="none",document.body.appendChild(d),d.click()}})}function v(e){var t=e;return function(e,n,i,o,r){var s=l.defer();return setTimeout(function(){var l=a("filter"),r=a("orderBy"),c=a("groupBy"),u=a("pageGroup"),d=l(t,e),g=d;s.notify(d.length);var f=[];i.value&&f.push(i.value),[].push.apply(f,n),f.length>0&&(g=r(d,f));var p=u(c(g,i.value),o);s.resolve(p)},0),s.promise}}function x(e){var t=e;return function(e,n,i,o,r){for(var c=l.defer(),u=t.clone(),d=a("filter"),g=a("orderBy"),f=a("groupBy"),p=(a("pageGroup"),["Id"]),m=0;m<s.$columns.length;m++)s.$columns[m].visible&&(s.$columns[m].reqColumns?p.push.apply(p,s.$columns[m].reqColumns):p.push(s.$columns[m].key));u.select(p.toString());var $=[];i.value&&$.push(i.value),[].push.apply($,n);for(var m=0;m<$.length;m++){var h=$[m];"-"==h[0]&&(h=h.substring(1)+" desc"),u.orderBy(h)}return u.page(o.currentPage,o.maxPerPage),u.execute().then(function(t){s.$table.allSelected=!1,H.length>0&&(t=t.map(function(e){return H.indexOf(e.Id)>-1&&(e.$selected=!0),e}));var n,l=$.map(function(e){return e=e.replace(/\//g,".")}),a=g(d(t,e),l);n=i.value?f(a,i.value):{undefined:a},c.resolve(n)}),c.promise}}function w(t){var n=[];return B?e.forEach(B,function(i){var l="",a=null,o={visible:!0};e.isObject(i)?(l=i.key,o=e.extend(o,i)):l=i,"-"==l[0]&&(l=i.key.substring(1),o.visible=!1);var r=l.indexOf(":");if(r!=-1&&(o.width=l.substring(r+1),l=l.substring(0,r)),o.hidden=!1,a=t[l],null!=a){var s=e.extend({},a,a.table||{},F[l]||{},o);if(s.hidden)return;e.isDefined(s.visible)||(s.visible=!0),e.isDefined(s.binding)||s.type!==moment||(s.binding=new Function("row","return new moment(row."+l+').format("'+(s.format||"DD/MM/YYYY HH:mm HH:mm")+'");')),n.push({key:l,config:s,title:s.display||l,accessor:e.isFunction(s.binding)?s.binding:O(s.binding||l),htmlBinding:s.htmlBinding,binding:s.binding||l,visible:s.visible,filters:s.filters,reqColumns:s.reqColumns,sort:s.sort})}}):e.forEach(t,function(t,i){if(!B||B.indexOf(i)!=-1&&B.indexOf("-"+i)!=-1){var l=e.extend({},t,t.table||{},F[i]||{});l.hidden||(e.isDefined(l.visible)||(l.visible=!0),e.isDefined(l.binding)||l.type!==moment||(l.binding=new Function("row","return row."+i+"?new moment(row."+i+').format("'+(l.format||"DD/MM/YYYY HH:mm")+'"):"";')),n.push({key:i,config:l,title:l.display||i,accessor:e.isFunction(l.binding)?l.binding:O(l.binding||i),htmlBinding:l.htmlBinding,binding:l.binding||i,visible:l.visible,filters:l.filters,reqColumns:l.reqColumns,sort:l.sort}))}}),n}function y(){s.$table.allSelected=!s.$table.allSelected,e.forEach(s.$data,function(e){C(e,s.$table.allSelected)})}function k(t,n,i){n.$selected=e.isDefined(i)?i:!n.$selected;var l=t.filter(function(e){return e.$selected}),a=H.indexOf(n.Id);a>-1&&!n.$selected?H.splice(a,1):a==-1&&n.$selected&&H.push(n.Id),t.$selected=l.length===t.length;var o=0,r=0;e.forEach(s.$data,function(e,t){"$"!=t[0]&&(o++,e.$selected&&r++)}),s.$table.allSelected=o===r}function C(t,n){if(e.isDefined(n)?t.$selected=n:t.$selected=!t.$selected,e.forEach(t,function(e){e.$selected=t.$selected;var n=H.indexOf(e.Id);n>-1&&!e.$selected?H.splice(n,1):n==-1&&e.$selected&&H.push(e.Id)}),!e.isDefined(n)){var i=0,l=0;e.forEach(s.$data,function(e,t){"$"!=t[0]&&(i++,e.$selected&&l++)}),s.$table.allSelected=i===l}}function P(t){if(t.sort){if(t.sort.length>5&&t.sort.splice(5,t.sort.length-5),t.sort.length!==s.$sorting.length)return s.$sorting.length=0,void(s.$sorting=e.copy(t.sort));for(var n=0,i=e.copy(s.$sorting),l=0;l<t.sort.length;l++)t.sort[l]==i[l]?(i[l]="-"+t.sort[l],n++):"-"+t.sort[l]==i[l]&&(i[l]=t.sort[l],n--);n==t.sort.length||n==-Math.abs(t.sort.length)?(s.$sorting.length=0,s.$sorting=i):(s.$sorting.length=0,s.$sorting=t.sort)}else{col=t.key;var a=s.$sorting[0];col==a?s.$sorting[0]="-"+col:"-"+col==a?s.$sorting[0]=col:(s.$sorting.length=0,s.$sorting.push(col))}}function S(e){if(e.sort){if(e.sort.length>5&&e.sort.splice(5,e.sort.length-5),e.sort.length!==s.$sorting.length)return"fa fa-sort fa-lg";for(var t=0,n=0;n<e.sort.length;n++)e.sort[n]==s.$sorting[n]?t++:"-"+e.sort[n]==s.$sorting[n]&&t--;return t==e.sort.length?"fa fa-sort-asc fa-lg brand-primary":t==-Math.abs(e.sort.length)?"fa fa-sort-desc fa-lg brand-primary":"fa fa-sort fa-lg"}return col=e.key,col==s.$sorting[0]?"fa fa-sort-asc fa-lg brand-primary":"-"+col==s.$sorting[0]?"fa fa-sort-desc fa-lg brand-primary":"fa fa-sort fa-lg"}function E(){s.$filtering=j||{$:""},s.$sorting=[],H=[],s.$table.allSelected=!1,e.forEach(s.$data,function(t){e.forEach(t,function(e){e.$selected=!1})}),s.$columns.length=0,[].push.apply(s.$columns,w(s.$schema))}function O(e,t){return t?new Function("row","return new moment(row."+e+").format("+t+");"):new Function("row","return row."+e+";")}function D(){i.open({template:'<div class="modal-header"><button class="close" type="button" ng-click="$dismiss()"><i class="material-icons">clear</i></button><h3 class="modal-title">Customize Columns</h3></div><div class="modal-body"><p class="text-muted">Select and drag the columns to adjust the order of the columns.</p><div ui-sortable ng-model="columns"><div ng-repeat="column in columns">{{column.title}}<div class="checkbox pull-right m0"><input type="checkbox" id="columncustomise{{::$index}}" ng-model="column.visible" ng-checked="column.visible" /><label for="columncustomise{{::$index}}"></label></div><br class="clearfix"></div></div></div><div class="modal-footer"><button class="btn btn-xs btn-success" ng-click="$close(columns)"><i class="material-icons">save</i>Save</button></div>',controller:["$scope","columns",function(t,n){function i(e,n){t.columns.splice(n,0,t.columns.splice(e,1)[0])}t.columns=e.copy(n),t.moveUp=function(e){var n=t.columns.indexOf(e);i(n,n-1)},t.moveDown=function(e){var n=t.columns.indexOf(e);i(n,n+1)}}],size:"sm",windowClass:"column-configure-modal",resolve:{columns:function(){return s.$columns}}}).result.then(function(e){s.$columns=e})}var j=t(u.filtering)(s),q=t(u.sorting)(s),I=t(u.grouping)(s),A=t(u.paging)(s),F=t(u.config)(s)||{},B=t(u.columns)(s);s.$schema=n[u.schema].$schema,s.$table={actionColumn:!1,selectionColumn:!1,cardTemplate:"{{$row | json}}",toggleSelectAll:y,toggleRowSelection:k,toggleGroupSelection:C,allSelected:!1,reset:E,configureColumns:D,sort:P,getSortingClass:S,"export":b},s.$columns=w(s.$schema),s.$filtering=j||{$:""},s.$sorting=q||[],s.$grouping=I||{value:void 0},s.$paging=A||{currentPage:1,totalItems:0,maxPerPage:10},s.$data={},s.$datasource=function(){return l.when([])};var M=t(u.datasource)(s);M?e.isArray(M)?s.$datasource=v(M):e.isFunction(M)?s.$datasource=M:s.$datasource=x(M):s.$datasource=function(){return l.when([])},s.$watch(function(){return t(u.datasource)(s)},function(t){t?e.isArray(t)?s.$datasource=v(t):e.isFunction(t)?s.$datasource=t:s.$datasource=x(t):s.$datasource=function(){return l.when([])},f()}),s.$watchCollection(function(){return s.$filtering},f),s.$watchCollection(function(){return s.$sorting},f),s.$watchCollection(function(){return s.$grouping},f),s.$watch(function(){return s.$paging.currentPage},f),s.$watch(function(){return s.$paging.maxPerPage},f),s.$watch(function(){return s.$columns},f,!0);var Y=null;g(s,function(e,t){c.find("table").append(e)});var H=[]}var c={wrapperClass:"table-responsive",tableClass:"table table-bordered",minWidth:"600px"};return{scope:!0,transclude:!0,template:function(e,t){return'<div class="'+(t.wrapperClass||c.wrapperClass)+'"><div class="shadow" ng-show="$data.$loading"><img src="/includes/images/preloader-fading.gif" /></div><table class="'+(t.tableClass||c.tableClass)+' module-table" style="width:100%;min-width:'+(t.minWidth||c.minWidth)+'"></table></div>'},compile:function(e,t){return s}}}function n(){return{restrict:"E",scope:!0,replace:!0,template:function(e,t){var n='<thead><tr><th colspan="100" class="table-arrange">';return t.title&&(n+='<h3 class="table-title">'+t.title+"</h3>"),t.showCount&&(n+='<h3 class="table-title brand-primary">({{$visible.length}} / {{ $data.length }})</h3>'),(t.columnsOptions||t.exportOptions)&&(n+='<div class="columns-options">'),t.columnsOptions&&(n+='<a href="" ng-click="$table.reset()"><i class="material-icons">settings_backup_restore</i> Reset</a><a href="" ng-click="$table.configureColumns()"><i class="material-icons">sort</i> Arrange</a>'),t.exportOptions&&(n+='<span class="dropdown" dropdown><a href="" class="dropdown-toggle" dropdown-toggle><i class="material-icons">receipt</i> Export</a><ul class="dropdown-menu"><li><a href ng-click="$table.export($event, \'csv\', false)" style="float:none !important;margin:0;">Csv (ALL)</a></li><li><a href ng-click="$table.export($event, \'json\', false)" style="float:none !important;margin:0;">Json (ALL)</a></li><li><a href ng-click="$table.export($event, \'csv\', true)" style="float:none !important;margin:0;">Csv (SELECTED)</a></li><li><a href ng-click="$table.export($event, \'json\', true)" style="float:none !important;margin:0;">Json (SELECTED)</a></li></ul></span>'),(t.columnsOptions||t.exportOptions)&&(n+="</div>"),1==t.paging&&(n+='<div class="pull-right pagination-wrapper" ng-hide="($paging.totalItems / $paging.maxPerPage) <= 1"><pagination class="pagination-sm"  style="margin: 0;" total-items="$paging.totalItems" ng-model="$paging.currentPage" items-per-page="$paging.maxPerPage" boundary-links="true" max-size="3" first-text="&laquo;" previous-text="&lsaquo;" next-text="&rsaquo;" last-text="&raquo;"></pagination></div>'),t.search&&(n+='<input type="text" class="form-control pull-right" style="width:300px" placeholder="Search.." ng-model="$filtering.$" />'),n+="</th></tr></thead>"}}}function i(){return{restrict:"E",scope:!0,replace:!0,template:function(e,t){var n='<thead><tr><th ng-if="::$table.selectionColumn" style="width:40px;text-align:center;"><div class="checkbox"><input type="checkbox" id="table-group-check" ng-click="$table.toggleSelectAll()" ng-checked="$table.allSelected"/><label for="table-group-check"></label></div></th><th ng-if="::$table.actionColumn" class="action-column mobile">Actions</th><th ng-repeat="$column in $columns | filter: { visible: true }" class="module-table-head" ng-class="$column.config.headingClass" ng-style="{ \'width\': ($column.config.width || \'auto\') }"><div><i ng-class="$column.icon"></i> {{ ::$column.title | normalise }}<span class="table-sort"><a href="" ng-click="$table.sort($column)"><i ng-class="$table.getSortingClass($column)"></i></a></span></div></th><th ng-if="::$table.actionColumn" class="action-column">Actions</th></tr>';return n+="</thead>"}}}function l(t,n){function i(e){var t=jQuery(e.context).find("table-expand-row");return!!t.length&&{html:t.html()}}function l(e){var t=jQuery(e.context).find("table-actions");return!!t.length&&{html:t.html()}}function a(e){var t=jQuery(e.context).find("table-selection");return!!t.length&&{html:t.html()}}return{restrict:"E",scope:!0,replace:!0,template:function(e,t){var n='<tbody ng-repeat="(title, group) in $data track by title"><tr ng-show="group.length == 0"><td col="100" class="text-center bold" style="background:none;">No Data</td></tr><tr ng-hide="title == \'undefined\'"><td ng-if="::$table.selectionColumn" style="width:40px;text-align:center;"><div class="checkbox"><input id="group-check-{{::title}}" type="checkbox" ng-click="$table.toggleGroupSelection(group)" ng-checked="group.$selected"/><label for="group-check-{{::title}}"></label></div></td><td colspan="1000"><b><u>{{ title }}</u></b></td></tr><tr ng-repeat-start="$row in group track by $row.Id" ng-class="$row.$selected?\'active\':\'\'"><td ng-if="::$table.selectionColumn" style="width:40px;text-align:center;"><div class="checkbox"><input id="table-check-{{::title}}{{::$index}}" type="checkbox" ng-click="$table.toggleRowSelection(group, $row)" ng-checked="$row.$selected"/><label for="table-check-{{::title}}{{::$index}}"></label></div></td><td ng-if="::$table.actionColumn" class="action-column mobile" bind-html-compile="$table.actionColumn.html"></td><td ng-repeat="$column in $columns | filter: { visible: true } track by $column.key" ng-class="$column.config.cellClass"><div ng-if="::!$column.htmlBinding">{{$column.accessor($row)}}</div><div ng-if="::$column.htmlBinding" bind-html-compile="$column.accessor($row)"></div></td><td ng-if="::$table.actionColumn" class="action-column" bind-html-compile="$table.actionColumn.html"></td></tr><tr ng-repeat-end="" ng-show="$row.$$expand" ng-if="::$table.expandView"><td bind-html-compile="$table.expandView.html" colspan="100"></td></tr></tbody>';return n},compile:function(n,o){function r(n,i,l){function a(n,i){return console.log('GetCellValue is depreciated for performance, please use "$column.accessor($row)" instead, functions are now precompilied;'),"string"==typeof i.binding?t(i.binding)(n):e.isFunction(i.binding)?i.binding(n,i):""}function o(e){l.autoClose&&"false"!=l.autoClose?(expanded&&(expanded.$$expand=!1),expanded==e?expanded=null:(expanded=e,e.$$expand=!e.$$expand)):e.$$expand=!e.$$expand}n.$table.actionColumn=c,n.$table.selectionColumn=s,n.$table.getCellValue=a,n.$table.expandView=u,n.$table.toggleRow=o}var s=a(n),c=l(n),u=i(n);return r}}}function a(){return{restrict:"E",scope:!0,replace:!0,template:function(e,t){var n='<tfoot><tr><th colspan="100" class="table-arrange">';return t.title&&(n+='<h3 class="table-title">'+t.title+"</h3>"),t.showCount&&(n+='<b class="brand-primary">(showing {{$paging.maxPerPage}} from {{ $paging.totalItems }})</b>'),t.columnsOptions&&(n+='<div class="columns-options"><a href="" ng-click="$table.reset()"><i class="material-icons">settings_backup_restore</i>Reset</a><a href="" ng-click="$table.configureColumns()"><i class="material-icons">receipt</i>Arrange</a></div>'),n+='<div class="pull-right mt20 pagination-wrapper"><pagination class="pagination-sm"  style="margin: 0;" total-items="$paging.totalItems" ng-model="$paging.currentPage" items-per-page="$paging.maxPerPage" boundary-links="true" max-size="3" first-text="&laquo;" previous-text="&lsaquo;" next-text="&rsaquo;" last-text="&raquo;"></pagination></div>',t.search&&(n+='<input type="text" class="form-control pull-right" style="width:300px" placeholder="Search.." ng-model="$filtering.$" />'),n+="</th></tr></tfoot>"}}}function o(e){return function(t,n){for(var i=e("filter"),l=i(t,n),a=0;a<t.length;a++){var o=t[a];l.indexOf(o)>-1?o.$filtered=!0:o.$filtered=!1}return t}}function r(){return function(e){return e.replace("_"," ")}}function s(){return function(t,n){null==n.maxPerPage&&(n.maxPerPage=t.length);var i={},l=(n.currentPage-1)*n.maxPerPage,a=n.maxPerPage;if(e.isArray(t))i.undefined=t.slice(l,l+a);else{var o=[];for(var r in t)t.hasOwnProperty(r)&&"$"!=r[0]&&o.push(r);o.sort(),e.forEach(o,function(e){var n=t[e];if(!(a<=0)){if(l>n.length)return void(l-=n.length);l>0&&(n.splice(0,l),l=0),a>=n.length?(i[e]=n,a-=n.length):(i[e]=n.slice(0,a),a=0)}})}return i}}function c(){return function(t,n){return e.isArray(n)&&(n.length=0,[].push.apply(n,t)),t}}var u=e.module("framework.services.data");u.directive("tableFor",t),u.directive("tableTitlebar",n),u.directive("tableHeading",i),u.directive("tableDataRows",l),u.directive("tableFooter",a),u.filter("publish",c),u.filter("softFilter",o),u.filter("pageGroup",s),u.filter("normalise",r),t.$inject=["$parse","Model","$modal","$q","$filter","$timeout","CSV"],l.$inject=["$parse","Model"],o.$inject=["$filter"]}(angular);;;;
!function(i){function n(n){return function(n,o,t){var e=o[0];i.element(e).bind("scroll",function(){n.$apply(function(){e.scrollTop+e.offsetHeight>=e.scrollHeight&&(n.displayLimit=n.displayLimit+10)})})}}var o=i.module("framework.directives.UI");o.directive("scrollPosition",n),n.$inject=["$window"]}(angular);;;;
!function(e){function t(t){return{restrict:"E",scope:{start:"&",end:"&",selected:"=",showToggle:"="},templateUrl:"/e9_components/directives/datepickerwide/partial.html",link:function(n,s,o,r){function a(e){return n.utc?new moment.tz(e,"utc"):new moment(e)}function c(){n.years=[],n.months=moment.monthsShort().map(function(e,t){return{title:e,value:t,show:!0}}),n.weeks={},o.range?(n.range=!0,n.selected=n.selected||{},n.selected.from=a(n.selected.from).startOf("day"),n.selected.to=a(n.selected.to).endOf("day"),n.span="day"):(n.range=!1,n.selected=new moment(n.selected)),d()}function d(){l(w,g)}function l(e,s){n.years.length=0,t(function(){for(var t=e.year(),o=s.year(),r=t;r<=o;r++)n.years.push({title:r,value:r});f(e,s,n.selected)},0)}function f(t,s,o){n.range&&(o=o.from),e.forEach(n.months,function(e,n){var r=o.clone().month(n).hour(12);e.show=r.isBetween(t.startOf("day"),s.endOf("day"))}),i(t,s,n.selected)}function i(e,s,o){n.weeks=[],t(function(){if(n.range&&(o=o.from),o){var t,r;for(t=o.clone().startOf("month"),r=o.clone().endOf("month"),n.weeks=[];t.isBefore(r);){if(t.isBetween(e,s)){var a=t.isoWeek(),c={title:t.format("DD"),name:t.format("dd"),value:t.date(),status:""};n.weeks.filter(function(e){return e.number==a}).length?n.weeks.filter(function(e){return e.number==a})[0].days.push(c):n.weeks.push({number:a,days:[c]})}t.add(1,"day")}}},0)}function m(e){n.range?(n.selected.from.year(e).startOf("year"),n.selected.to.year(e).endOf("year"),n.selected.span="year"):n.selected.year(e),y(),f(w,g,n.selected)}function u(e){n.range?(n.selected.from.month(e).startOf("month"),n.selected.to.month(e).endOf("month"),n.selected.span="month"):n.selected.month(e),y(),i(w,g,n.selected)}function h(e){n.range?(n.selected.from.date(e).startOf("day"),n.selected.to.date(e).endOf("day"),n.selected.span="day"):n.selected.date(e)}function y(){n.range?(w.isAfter(n.selected.from)&&(n.selected.from=a(w.clone())),g.isBefore(n.selected.to)&&(n.selected.to=a(g.clone()))):(w.isAfter(n.selected)&&(n.selected=a(w.clone())),g.isBefore(n.selected)&&(n.selected=a(g.clone())))}var w=new moment(n.start()),g=new moment(n.end());n.selectYear=m,n.selectMonth=u,n.selectDay=h,n.dateShow=o.dateshow,n.hideDates="hideDates"in o,n.days=!0,n.utc="utc"in o,c()}}}var n=e.module("framework.UI",[]);n.directive("datePickerWide",t),t.$inject=["$timeout"]}(angular);;;;
!function(e){function t(e){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"/e9_components/directives/infocard-template.html",link:function(t,c,n){t.item=e(n.item)(t),t.accessor=e(n.accessor)(t),t.$watch(function(){return e(n.item)(t)},function(e){t.item=e}),t.$watch(function(){return e(n.accessor)(t)},function(e){t.accessor=e})}}}var c=e.module("framework.directives.UI");c.directive("infocard",t),t.$inject=["$parse"]}(angular);;;;
!function(){function e(e,t){return{transclude:!0,template:function(e,t){return t.table?'<table class="scroll-container table table-bordered table-condensed" style="position:relative;height:600px;width:100%;overflow-y:scroll;"><tbody class="scroll-spacing"></tbody></table>':'<div class="scroll-container" style="position:relative;height:600px;width:100%;overflow-y:scroll;"><div class="scroll-spacing"></div></div>'},compile:function(){return function(t,o,l,i,n){function r(e){T=e,c()}function c(){U&&clearTimeout(U),U=setTimeout(function(){var e=m.offset().top;if(N)m.height($(N).height());else{var t=$(window).height();m.height(t-e+50)}U=null,_=m.height(),k=m.width()-I,k<(l.itemWidth||1e6)&&(E=k),O=Math.floor(k/E),C=(k-E*O)/(O+1),z=Math.ceil(T.length/O),v.height(z*M),W=Math.min(z,Math.ceil(_/M+2)),H=!0,a()},500)}function s(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",e.appendChild(o);var l=o.offsetWidth;return e.parentNode.removeChild(e),t-l}function a(){if(R=m.scrollTop(),H||0==D.length)H=!1,S=Math.max(0,Math.floor((R-M)/M)),h();else{var e=Math.max(0,Math.floor((R-M)/M));if(e==S)return;S=e,f()}}function h(){angular.forEach(D,function(e){e.remove()}),D.length=0;for(var e=0;e<W;e++)D.push(new d(S+e));t.$apply()}function f(){for(var e=D.map(function(e){return e.rowNumber}),o=Math.min.apply(Math,e),l=Math.max.apply(Math,e),i=S,n=S+W-1;n>z;)n--,i--;for(;i<0;)n++,i++;if(n>l){var r=D.filter(function(e){return e.rowNumber<i});angular.forEach(r,function(e){var t=D.indexOf(e);D.splice(t,1),e.reconfigureRow(n--),D.push(e)})}else if(i<o){var c=D.filter(function(e){return e.rowNumber>n});angular.forEach(c,function(e){var t=D.indexOf(e);D.splice(t,1),e.reconfigureRow(i++),D.unshift(e)})}console.log("Update Rows - $apply"),t.$apply()}function u(e){return e*M}function p(e){var t=Math.floor(e%O);return t*E+t*C+C}function d(e){this.rowNumber=e,this.columns=[],this.startIndex=e*O,this.top=u(e);for(var o=0;o<O;o++){var l=this.startIndex+o,i={};i.$item=T[l],i.$item&&(i.$scope=t.$new(!1),i.$scope[y]=i.$item,n(i.$scope,function(e){i.$cell=e}),i.$cell.appendTo(m),i.$cell.width(E),i.$cell.height(M),i.$cell.css("position","absolute"),i.$item?(i.$cell.css("display","block"),i.$cell.css("top",this.top),i.$cell.css("left",p(l))):i.$cell.css("display","none"),this.columns.push(i))}this.reconfigureRow=function(e){this.rowNumber=e,this.startIndex=e*O,this.top=u(e),angular.forEach(this.columns,function(e,t){var o=this.startIndex+t;e.$item=T[o],e.$scope[y]=e.$item,e.$item?(null==e.$cell&&(n(e.$scope,function(t){e.$cell=t}),e.$cell.appendTo(m),e.$cell.width(E),e.$cell.height(M),e.$cell.css("position","absolute")),e.$cell.css("display","block"),e.$cell.css("top",this.top),e.$cell.css("left",p(o))):(angular.forEach(e.$cell,function(e){m[0].removeChild(e)}),e.$cell=null)},this)},this.remove=function(){angular.forEach(this.columns,function(e,t){e.$scope.$destroy(),angular.forEach(e.$cell,function(e){m[0].removeChild(e)})}),this.columns.length=0}}var m=(!!l.table,o.find(".scroll-container")),v=o.find(".scroll-spacing"),w=l.repeat,g=w.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!g)throw new Error("collection-repeat expected expression in form of '_item_ in _collection_[ track by _id_]' but got '"+l.repeat+"'.");var y=g[1],b=g[2],x=e(b),M=l.itemHeight,E=l.itemWidth||1e6,C=0,N=l.matchHeight,_=0,k=0,I=s(),R=0,T=[],S=null,W=0,D=[],O=0,z=0,H=!1,U=null;l.configureCell,$(window).on("resize",c),m.on("scroll",a),t.$watchCollection(x,function(e){if(newData=e||(e=[]),!angular.isArray(e))throw new Error("collection-repeat expected an array for '"+b+"', but got a "+typeof e);t.$$postDigest(function(){r(newData)})}),t.$on("$destroy",function(){$(window).off("resize",c),m.off("scroll",a)}),c()}}}}var t=angular.module("framework.directives.UI");t.directive("virtualisedRepeater",e),e.$inject=["$parse","$window"]}();;;;
!function(e){"use strict";function t(){return{restrict:"E",template:'<div class="form-group"><label for="" ng-if="!showLabel">Address Finder</label><input type="text" class="form-control google-address-text" /></div>',scope:{object:"=",showLabel:"=",defaultFill:"="},link:function(e,t,o){function a(){var t=r.getPlace();console.log(t),e.object[s+"Address1"]="",e.object[s+"Address2"]="",e.object[s+"Area"]="",e.object[s+"TownCity"]="",e.object[s+"Postcode"]="",e.object[s+"County"]="",e.object[s+"Country"]="",e.object[s+"Latitude"]="",e.object[s+"Longitude"]="";for(var o=0;o<t.address_components.length;o++){var a=t.address_components[o].types[0],c=t.address_components[o].long_name;switch(a){case"street_number":e.object[s+"Address1"]=c;break;case"route":e.object[s+"Address1"]?e.object[s+"Address1"]=e.object[s+"Address1"]+" "+c:e.object[s+"Address1"]=c;break;case"":e.object[s+"Address2"]=c;break;case"locality":e.object[s+"Area"]=c;break;case"postal_town":e.object[s+"TownCity"]=c;break;case"postal_code_prefix":case"postal_code":e.object[s+"Postcode"]=c;break;case"administrative_area_level_2":e.object[s+"County"]=c;break;case"country":e.object[s+"Country"]=c}}e.object[s+"Latitude"]=t.geometry.location.lat(),e.object[s+"Longitude"]=t.geometry.location.lng(),e.$apply(),e.$emit("address_changed:"+s,{latitude:t.geometry.location.lat(),longitude:t.geometry.location.lng()})}var s=o.prefix||"",c=t.find("input")[0];e.object.StopSummary&&e.defaultFill&&(c.value=e.object.StopSummary);var r=new google.maps.places.Autocomplete(t.find("input")[0],{bounds:new google.maps.LatLngBounds({lat:49.173624,lng:-11.184082},{lat:59.326885,lng:2.790527})});r.addListener("place_changed",a)}}}var o=e.module("framework.directives.utils");o.directive("addressPopulate",[t])}(angular);;;;
!function(i){function n(){return{scope:{instructionsObj:"="},link:function(i,n,t){i.i=0,i.next=function(){i.i<i.instructionsObj.instructions.length-1?i.i++:i.i=0},i.prev=function(){i.i>0?i.i--:i.i=i.instructionsObj.instructions.length-1}},templateUrl:"/e9_components/directives/instructions/partial.html"}}var t=i.module("framework.UI");t.directive("instructions",n),n.$inject=[]}(angular);;;;
function MarkerClusterer(t,e,r){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var s=r||{};this.gridSize_=s.gridSize||60,this.minClusterSize_=s.minimumClusterSize||2,this.maxZoom_=s.maxZoom||null,this.styles_=s.styles||[],this.imagePath_=s.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=s.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=s.zoomOnClick&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,void 0!=s.averageCenter&&(this.averageCenter_=s.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var o=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=o.map_.getZoom();o.prevZoom_!=t&&(o.prevZoom_=t,o.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){o.redraw()}),e&&e.length&&this.addMarkers(e,!1)}function Cluster(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,t.getStyles(),t.getGridSize())}function ClusterIcon(t,e,r){t.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=e,this.padding_=r||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="/includes/images/markerclusters/",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),r=new google.maps.LatLngBounds,s=0;t=e[s];s++)r.extend(t.getPosition());this.map_.fitBounds(r)},MarkerClusterer.prototype.setStyles=function(t){this.styles_=t},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(t){this.maxZoom_=t},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(t,e){for(var r=0,s=t.length,o=s;0!==o;)o=parseInt(o/10,10),r++;return r=Math.min(r,e),{text:s,index:r}},MarkerClusterer.prototype.setCalculator=function(t){this.calculator_=t},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(t,e){for(var r,s=0;r=t[s];s++)this.pushMarkerTo_(r);e||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},MarkerClusterer.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var r,s=0;r=this.markers_[s];s++)if(r==t){e=s;break}return e!=-1&&(t.setMap(null),this.markers_.splice(e,1),!0)},MarkerClusterer.prototype.removeMarker=function(t,e){var r=this.removeMarker_(t);return!(e||!r)&&(this.resetViewport(),this.redraw(),!0)},MarkerClusterer.prototype.removeMarkers=function(t,e){for(var r,s=!1,o=0;r=t[o];o++){var i=this.removeMarker_(r);s=s||i}if(!e&&s)return this.resetViewport(),this.redraw(),!0},MarkerClusterer.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(t){this.map_=t},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(t){this.gridSize_=t},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},MarkerClusterer.prototype.getExtendedBounds=function(t){var e=this.getProjection(),r=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),s=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(r);o.x+=this.gridSize_,o.y-=this.gridSize_;var i=e.fromLatLngToDivPixel(s);i.x-=this.gridSize_,i.y+=this.gridSize_;var n=e.fromDivPixelToLatLng(o),a=e.fromDivPixelToLatLng(i);return t.extend(n),t.extend(a),t},MarkerClusterer.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(t){for(var e,r=0;e=this.clusters_[r];r++)e.remove();for(var s,r=0;s=this.markers_[r];r++)s.isAdded=!1,t&&s.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var e,r=0;e=t[r];r++)e.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var r=6371,s=(e.lat()-t.lat())*Math.PI/180,o=(e.lng()-t.lng())*Math.PI/180,i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),n=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),a=r*n;return a},MarkerClusterer.prototype.addToClosestCluster_=function(t){for(var e,r=4e4,s=null,o=(t.getPosition(),0);e=this.clusters_[o];o++){var i=e.getCenter();if(i){var n=this.distanceBetweenPoints_(i,t.getPosition());n<r&&(r=n,s=e)}}if(s&&s.isMarkerInClusterBounds(t))s.addMarker(t);else{var e=new Cluster(this);e.addMarker(t),this.clusters_.push(e)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(e),s=0;t=this.markers_[s];s++)!t.isAdded&&this.isMarkerInBounds_(t,r)&&this.addToClosestCluster_(t)},Cluster.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return this.markers_.indexOf(t)!=-1;for(var e,r=0;e=this.markers_[r];r++)if(e==t)return!0;return!1},Cluster.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,r=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,s=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var o=this.markers_.length;if(o<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),o==this.minClusterSize_)for(var i=0;i<o;i++)this.markers_[i].setMap(null);return o>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),s=0;t=r[s];s++)e.extend(t.getPosition());return e},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},Cluster.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var r,s=0;r=this.markers_[s];s++)r.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var o=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,o);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(t){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_,t),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}var e=this.getPanes();e.overlayMouseTarget.appendChild(this.div_);var r=this,s=!1;google.maps.event.addDomListener(this.div_,"click",function(t){s||r.triggerClusterClick(t)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){s=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){s=!0})},ClusterIcon.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(e.x-=this.iconAnchor_[0],e.y-=this.iconAnchor_[1]):(e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10)),e},ClusterIcon.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition,this.iconAnchor_=e.iconAnchor},ClusterIcon.prototype.setCenter=function(t){this.center_=t},ClusterIcon.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var r=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+r+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?e.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var s=this.textColor_?this.textColor_:"black",o=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+s+"; position:absolute; font-size:"+o+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove;;;;
!function(t,i){"use strict";t.CAB9=function(){this.VERSION="1.0.0",this.AUTHOR="e9ine",this.pageScrollElement="html, body",this.$body=i("body")},CAB9.prototype.setUserOS=function(){var t="";-1!=navigator.appVersion.indexOf("Win")&&(t="windows"),-1!=navigator.appVersion.indexOf("Mac")&&(t="mac"),-1!=navigator.appVersion.indexOf("X11")&&(t="unix"),-1!=navigator.appVersion.indexOf("Linux")&&(t="linux"),this.$body.addClass(t)},CAB9.prototype.setUserAgent=function(){navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i)?this.$body.addClass("mobile"):(this.$body.addClass("desktop"),navigator.userAgent.match(/MSIE 9.0/)&&this.$body.addClass("ie9"))},CAB9.prototype.initFormGroupDefault=function(){i(".form-group").click(function(){i(this).find(":input").focus()}),i("body").on("focus",".form-group :input",function(){i(".form-group").removeClass("focused"),i(this).parents(".form-group").addClass("focused")}),i("body").on("blur",".form-group :input",function(){i(this).parents(".form-group").removeClass("focused")}),i(".form-group .checkbox, .form-group .radio").hover(function(){i(this).parents(".form-group").addClass("focused")},function(){i(this).parents(".form-group").removeClass("focused")})},CAB9.prototype.initSidebarToggle=function(){i("body").on("click touchstart","#sidebar-toggle",function(){i("html").toggleClass("sidebar-visible")}),i("#sidebar-right-toggle").click(function(){i("html").addClass("right-sidebar-visible")}),i("#sidebar-right i").click(function(){i("html").removeClass("right-sidebar-visible")})},CAB9.prototype.initFastClick=function(){i(function(){})},CAB9.prototype.initPace=function(){Pace.on("done",function(){})},CAB9.prototype.setTabs=function(){var t=0;i(".module-item .module-item-nav-bar .tab-container ul.nav-tabs li").each(function(o){t+=i(this).width()}),i(".module-item .module-item-nav-bar .tab-container").width(t+120)},CAB9.prototype.init=function(){this.initFormGroupDefault(),this.setUserOS(),this.setUserAgent(),this.initSidebarToggle(),this.initPace(),this.initFastClick()}}(window,window.jQuery),jQuery.fn.rotate=function(t){return $(this).css({"-webkit-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)","-ms-transform":"rotate("+t+"deg)",transform:"rotate("+t+"deg)"}),$(this)};try{google.load("search","1")}catch(e){}Array.prototype.diff=function(t,i){return this.filter(function(o){return 0==t.filter(function(t){return i(o,t)}).length})},Array.prototype.changes=function(t,i){return{removed:this.diff(t,i),added:t.diff(this,i)}},Number.prototype.toRad=function(){return this*Math.PI/180},Number.prototype.toDeg=function(){return 180*this/Math.PI},$(document).on("wheel","input[type=number]",function(t){$(this).blur()}),SlidingMarker.initializeGlobally();;;;